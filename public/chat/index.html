<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    
      <title>嘀咕 :: 大大的小蜗牛</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<meta name="referrer" content="never" />
<link rel="canonical" href="https://eallion.com/chat/" />
<link rel="stylesheet" href="https://eallion.com/style.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:500&display=swap" media="print" onload="this.media='all'">
<link rel="shortcut icon" href="https://eallion.com/favicon.ico">

<meta property="og:title" content="嘀咕" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://eallion.com/chat/" />




    
    
  </head>
  <body class="">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a href="https://eallion.com" class="logo" style="text-decoration: none;">
  
    <span class="logo__text">大大的小蜗牛</span>
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu hidden">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/archives/">归档</a></li>
        
      
        
          <li><a href="/talk/">嘀咕</a></li>
        
      
        
          <li><a href="/links/">友链</a></li>
        
      
        
          <li><a href="/about/">关于</a></li>
        
      
    

                <li><a href="/search/"><svg t="1556783211810" class="search-box-icon" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2078" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M981.39652054 920.86314525L704.56522859 644.0318533a366.65501012 366.65501012 0 1 0-61.73503038 65.64040943L917.55859375 984.40065827z m-856.17925347-493.12920861a284.19142939 284.19142939 0 1 1 283.89101562 284.19142939A284.49184317 284.49184317 0 0 1 125.06706019 427.73393664z" fill="" p-id="2079" data-spm-anchor-id="a313x.7781069.0.i2"></path></svg></a></li>
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/archives/">归档</a></li>
      
    
      
        <li><a href="/talk/">嘀咕</a></li>
      
    
      
        <li><a href="/links/">友链</a></li>
      
    
      
        <li><a href="/about/">关于</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger hidden">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
<div class="post">
  <h2 class="post-title">嘀咕</h2>
  <div class="post-content" id="app">
    <p v-show="count == 0">别急，加载呢……</p>
    <div v-show="count">
    <p >总共嘀咕了 {{count}} 条</p>
    <section class="timeline">
      <ul>
        <li class="item" v-for="item in contents" v-cloak>
          <div>
            <p v-html='item.attributes.content'></p>
            <time v-bind:datetime="item.attributes.time"><small>{{item.attributes.time}}</small></time>
          </div>
        </li>
      </ul>
    </section>
    <div class="load-ctn">
      <button class="load-btn" v-on:click="loadMore" v-if="contents" v-cloak>再翻翻</button>
      <p class="tip" v-else>别急，加载呢</p>
    </div>
  </div>
  </div>
</div>
<style>
  .timeline ul {margin:0;padding-bottom:2rem;}
  .timeline ul li {background:#eaeaea;list-style-type:none;position:relative;width:2px;margin-left:20px;padding:10px 0 50px;}
  .timeline ul li::after {content:'';position:absolute;left:50%;top:25px;transform:translateX(-50%);width:8px;height:8px;border-radius:50%;background:inherit;}
  .timeline ul li div {background:#eaeaea;border-radius:5px;position:relative;top:0;left:40px;width:670px;padding:8px 16px;}
  .timeline ul li div p{margin:0;}
  .timeline ul li div::before{content:'';position:absolute;top:10px;width:0;height:0;border-style:solid;left:-15px;border-width:8px 16px 8px 0;border-color:transparent #eaeaea transparent transparent;}
  .dark-theme .timeline ul li,.dark-theme .timeline ul li div{background:#3b3d42;}
  .dark-theme .timeline ul li div::before{border-color:transparent #3b3d42 transparent transparent;}
  @media (max-width:860px) {
    .timeline ul li{margin-left:0;}
    .timeline ul li div{width:calc(100vw - 75px);left:30px;}

  }
</style>
<link type="text/css" rel="stylesheet" href="https://at.alicdn.com/t/font_1755564_z4mhxbw13mq.css"></link>

      </div>

      


    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


<footer class="footer">
  <div class="footer__inner">
    <div class="copyright">
      <span>共 9 篇文章</span><span> 527 字</span>
    </div>
    
      <div class="copyright">
        <span>© 2020 Powered by <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a> Theme by <a href="https://twitter.com/panr" target="_blank" rel="noopener">Panr</a></span>
      </div>
    
  </div>
</footer>

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/eallion/hugo@gh-pages/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.5.3/dist/av-min.js"></script>
<script type="text/javascript">
    var {
        Query
    } = AV;
    AV.init({
        appId:"jiw47JqfkHVpbbOeXvAdpEKK-9Nh9j0Va", 
        appKey:"HiripLF9IbAyl1vGSqtQ5Mfj", 
        serverURLs: 'https://talk.eallion.com',
    });

    var query = new AV.Query('content');

    var app = new Vue({
        el:'#app',
        data:{
            isShow: true,
            page:0,
            count:0,
            contents:[]
        },
        methods:{
            loadMore:function(event) { 
              getData(++this.page);
            }
        }
    })

    function urlToLink(str) {
        var re = /(http|ftp|https):\/\/[\w-]+(.[\w-]+)+([\w-.,@?^=%&:/~+#]*[\w-\@?^=%&/~+#])?/g;;

        str = str.replace(re, function(website) {
            return "<a href='" + website + "' target='_blank'> <i class='iconfont icon-lianjie-copy'></i>链接 </a>";
        });
        return str;
    }

    function getData(page = 0) {
        query.descending('createdAt').skip(page * 20).limit(20).find().then(function(results) {
            if (results.length == 0) {
                alert('待续')
            } else {
                let resC = results;
                reqData = false;
                resC.forEach((i) => {
                    let dateTmp = new Date(i.createdAt);
                    i.attributes.time = `${dateTmp.getFullYear()}-${(dateTmp.getMonth() + 1) < 10 ? ('0' + (dateTmp.getMonth()+1)) :dateTmp.getMonth()+1}-${(dateTmp.getDate() + 1) < 10 ? ('0' + dateTmp.getDate()) :dateTmp.getDate()} ${(dateTmp.getHours() + 1) <= 10 ? ('0' + dateTmp.getHours()) :dateTmp.getHours()}:${(dateTmp.getMinutes() + 1) <= 10 ? ('0' + dateTmp.getMinutes()) :dateTmp.getMinutes()}`;
                    i.attributes.content = urlToLink(i.attributes.content);
                    app.contents.push(i);
                })
            }

        }, function(error) {});
    }

    getData(0);

    query.count().then(function(count) {
        app.count = count;
    }, function(error) {});
</script>

    </div>
  </body>
</html>
