{{ define "main" }}
{{ .Scratch.Set "scope" "single" }}

<article>

  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert">

    <div class="min-w-0 min-h-0">

      <div class="article-content max-w-full">

      <div class="bg-neutral dark:bg-neutral-900 max-w-[800px] mx-auto rounded-2xl shadow-xl overflow-hidden">
        <div class="p-6 border-b border-[#f3f4f6] dark:border-[#1f2937]">
          <h2 class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="1.5rem" height="1.5rem" viewBox="0 0 24 24">
              <g fill="none" stroke="#fe8401" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M8.237 22.603A11.25 11.25 0 1 1 23.25 12" />
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M9.29 1.079c-1.52 2.233-2.539 6.287-2.539 10.92a24.6 24.6 0 0 0 1.515 8.96M.777 11.25h11.974M3 5.25h18M2.05 17.249h7.7m4.962-16.17a17 17 0 0 1 2.3 7.136" />
                <path d="M17.25 21a.375.375 0 0 1 0-.75m0 .75a.375.375 0 0 0 0-.75" />
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M17.25 18v-3m5.813 5.683a1.774 1.774 0 0 1-1.587 2.567h-8.452a1.773 1.773 0 0 1-1.587-2.567l4.226-8.452a1.774 1.774 0 0 1 3.174 0z" />
              </g>
            </svg>
            <span class="ml-2 text-2xl font-bold text-[#1f2937] dark:text-[#e3e5e8]">跳转提示</span>
          </h2>
        </div>

        <div class="p-6">
          <div class="scrolling-container overflow-hidden rounded-xl bg-[#f9fafb] dark:bg-neutral-800 p-4">
            <div class="flex flex-col items-center scrolling-wrapper animate-scroll-left hover:animation-paused">

              <div class="text-xl font-bold my-4 px-2 text-neutral-800 dark:text-neutral-100">即将离开大大的小蜗牛的博客，前住：</div>
              <span id="redirect-link"
                class="block w-fit max-w-full rounded-lg text-center px-5 py-3 border border-solid border-neutral-400 bg-neutral dark:border-neutral-600 dark:bg-neutral-100 text-neutral-800 break-words">未指定重定向目标。</span>

              <div class="flex items-center justify-center mt-4 mb-8 flex-wrap">
                <div
                  class="flex items-center rounded-full h-10 cursor-pointer outline-none p-4 bg-primary-700 dark:bg-primary-600">
                  <a href='' target="_self" id='direct-link' class="text-neutral hover:text-neutral dark:hover:text-neutral"
                    rel="noopener noreferrer">继续访问外部网站</a>
                </div>
              </div>

            </div>
          </div>

          <div class="mt-6 p-4 bg-primary-200 rounded-lg border border-primary-300 dark:border-neutral-600">
            <h3 class="font-semibold text-[#1e40af] flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd"
                  d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                  clip-rule="evenodd" />
              </svg>
              注意事项
            </h3>
            <ul class="mt-2 text-sm text-[#1d4ed8] list-disc pl-5 space-y-1">
              <li>该链接不属于本网站</li>
              <li>无操作时，不会自动跳转到目标网站</li>
              <li>我们无法确认该网页是否安全</li>
              <li>请注意您的帐号和财产安全</li>
            </ul>
          </div>
        </div>
      </div>

      </div>

    </div>

  </section>

</article>

<script>
  const params = new URLSearchParams(window.location.search);
  const encodedTarget = params.get('target');
  if (encodedTarget) {
    try {
      const target = atob(encodedTarget); // 使用 atob 进行 Base64 解码
      const decodedTarget = decodeURIComponent(target);

      // 检查目标 URL 是否已经包含查询字符串
      const hasQueryString = decodedTarget.includes('?');
      const separator = hasQueryString ? '&' : '?';

      document.getElementById('direct-link').href = decodedTarget + separator + 'ref=www.eallion.com';
      document.getElementById('redirect-link').textContent = decodedTarget; // 在新增的元素中显示原地址
      document.getElementById('redirect-link').href = decodedTarget + separator + 'ref=www.eallion.com';
    } catch (e) {
      document.getElementById('redirect-link').textContent = '未指定重定向目标。';
    }
  } else {
    document.getElementById('redirect-link').textContent = '未指定重定向目标。';
  }
</script>

{{ end }}
