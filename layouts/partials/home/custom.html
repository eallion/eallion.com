{{ $disableImageOptimization := .Site.Params.disableImageOptimization | default false }}

<!-- <meta http-equiv="onion-location" content="http://eallionskii7e32j3ncxnccyqq6uf7rbxwmst4x6mxeswx6fvrdtsmad.onion" /> -->

<style>#content_progress{display:none;}</style>

<section class="max-w-full prose dark:prose-invert">
    <div class="relative">
        <div class="absolute inset-x-0 bottom-0 h-1/2"></div>
        <div class="mx-auto max-w-7xl p-0">
            <div class="relative sm:overflow-hidden">
                <div class="fixed inset-x-0 top-0 -z-10">
                    {{ $useDefault := true }}
                    {{ $homepageImage := "" }}
                    {{ with .Site.Params.defaultBackgroundImage }}
                        {{ if or (strings.HasPrefix . "http:") (strings.HasPrefix . "https:") }}
                            {{ $homepageImage = resources.GetRemote . }}
                            {{ $useDefault = false }}
                        {{ else }}
                            {{ $homepageImage = resources.Get . }}
                            {{ $useDefault = false }}
                        {{ end }}
                    {{ end }}
                    {{ with .Site.Params.homepage.homepageImage }}
                        {{ if or (strings.HasPrefix . "http:") (strings.HasPrefix . "https:") }}
                            {{ $homepageImage = resources.GetRemote . }}
                        {{ else }}
                            {{ $homepageImage = resources.Get . }}
                        {{ end }}
                    {{ end }}
                    {{ if $homepageImage }}
                        {{ $style := "" }}
                        {{ $defaultPosition := cond $useDefault site.Params.imagePosition false }}
                        {{ with $.Params.imagePosition | default $defaultPosition }}
                          {{ $style = printf "object-position: %s;" . }}
                        {{ end }}
                        <img
                          id="background-image"
                          class="nozoom mt-0 mr-0 mb-0 ml-0 h-[1000px] w-full object-cover"
                          src="{{ $homepageImage.RelPermalink }}"
                          role="presentation"
                          {{ if $style }}style="{{ $style | safeCSS }}"{{ end }}>
                    {{/*
                    <video
                      class="w-full h-[1000px] object-cover nozoom mt-0 mr-0 mb-0 ml-0"
                      webkit-playsinline="true"
                      x-webkit-airplay="true"
                      playsinline="true"
                      x5-video-player-type="h5"
                      x5-video-orientation="h5"
                      x5-video-player-fullscreen="true"
                      preload="auto"
                      autoplay="true"
                      loop=""
                      muted="">
                      {{ $webmSource := resources.Get "images/video_WebTitle_batch.webm" }}
                      <source src="{{ $webmSource.RelPermalink }}" type="video/webm">
                      <source src="{{ $homepageImage.RelPermalink }}" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                    */}}
                      <div
                        class="from-neutral absolute inset-0 h-[1000px] bg-gradient-to-t to-transparent mix-blend-normal dark:from-neutral-800"></div>
                      <div
                        class="from-neutral absolute inset-0 h-[1000px] bg-gradient-to-t to-neutral-100 opacity-60 mix-blend-normal dark:from-neutral-800 dark:to-neutral-800"></div>
                    {{ end }}
                  </div>
                  <div class="relative flex flex-col items-center justify-center px-1 py-1 text-center">
                    {{ with .Site.Params.Author.image }}
                        {{ $authorImage := "" }}
                        {{ if or (strings.HasPrefix . "http:") (strings.HasPrefix . "https:") }}
                            {{ $authorImage = resources.GetRemote . }}
                        {{ else }}
                            {{ $authorImage = resources.Get . }}
                        {{ end }}
                        {{ if $authorImage }}
                            {{ $final := $authorImage }}
                            {{ if not $disableImageOptimization }}
                                {{ $final = $authorImage.Fill (print "288x288 q" ( $.Site.Params.Author.imagequality | default "96" )) }}
                            {{ end }}
                            <div class="tailwind-ticker w-auto relative group flex items-end transition-all duration-300">
                                <div class="rounded-full overflow-hidden min-w-[144px]">
                                    <img class="mb-2 h-36 w-36 nozoom rounded-full"
                                      width="144"
                                      height="144"
                                      alt="{{ $.Site.Params.Author.name | default `Author` }}"
                                      src="{{ $final.RelPermalink }}"
                                      data-zoom-src="{{ $authorImage.RelPermalink }}">
                                </div>
                                <div class="absolute bottom-0 left-full -ml-9 mb-1 w-8 h-8 rounded-full flex items-center justify-center group-hover:w-min group-hover:h-8 group-hover:rounded-lg transition-all duration-300">
                                  <div class="ticker hidden sm:flex w-9 sm:w-[226px] md:w-[295px] lg:w-[476px] min-w-[36px] transition-all duration-300">
                                      <div id="ticker" class="flex">
                                        {{ $mastodonData := "" }}
                                        {{ with resources.Get "data/mastodon/mastodon.json" }}
                                          {{ $mastodonData = . | transform.Unmarshal }}
                                        {{ end }}

                                        {{ if $mastodonData }}
                                          {{ if gt (len $mastodonData) 0 }}
                                            <div class="ticker-header"></div>
                                            <ul class="ticker-list">
                                              {{ range $index, $item := first 10 $mastodonData }}
                                                {{ $isReblog := false }}
                                                {{ $content := "" }}

                                                {{ if and $item.reblog $item.reblog.content }}
                                                  {{ $isReblog = true }}
                                                  {{ $content = $item.reblog.content }}
                                                {{ else if $item.content }}
                                                  {{ $content = $item.content }}
                                                {{ end }}

                                                {{ if $content }}
                                                  {{ $textContent := $content | plainify }}
                                                  {{ $textContent = replace $textContent ":star_empty:" "üåë" }}
                                                  {{ $textContent = replace $textContent ":star_half:" "üåó" }}
                                                  {{ $textContent = replace $textContent ":star_solid:" "üåï" }}

                                                  <li class="ticker-item{{ if eq $index 0 }} active{{ end }}" data-index="{{ $index }}" data-created-at="{{ $item.created_at }}">
                                                    <span class="datetime ml-1" data-time="{{ $item.created_at }}"></span>
                                                    <a href="{{ $item.url }}" target="_blank" rel="noopener noreferrer">{{ if $isReblog }}„ÄêËΩ¨„Äë{{ end }}{{ $textContent }}</a>
                                                  </li>
                                                {{ end }}
                                              {{ end }}
                                            </ul>
                                          {{ else }}
                                            <div class="ticker-header"></div>
                                            <ul class="ticker-list">
                                              <li class="ticker-item active" data-index="0">
                                                <span class="datetime ml-1">ÂàöÂàö</span>
                                                <a href="https://www.eallion.com/mastodon/" target="_blank" rel="noopener noreferrer">ÊöÇÊó†Âä®ÊÄÅÊï∞ÊçÆ</a>
                                              </li>
                                            </ul>
                                          {{ end }}
                                        {{ else }}
                                          <div class="ticker-header"></div>
                                          <ul class="ticker-list">
                                            <li class="ticker-item active" data-index="0">
                                              <span class="datetime ml-1">ÂàöÂàö</span>
                                              <a href="https://www.eallion.com/mastodon/" target="_blank" rel="noopener noreferrer">Êú∫‰ºöÊÄªÊòØÂûÇÈùí‰∫éÊúâÂáÜÂ§áÁöÑ‰∫∫ÔºÅ</a>
                                            </li>
                                          </ul>
                                        {{ end }}
                                      </div>
                                  </div>
                              </div>
                            </div>

                        {{ end }}
                    {{ end }}
                    <h1 class="mb-2 text-4xl font-extrabold text-neutral-800 dark:text-neutral-200">
                      <!-- {{ .Site.Params.Author.name | default .Site.Title }} -->
                      <div class="flex justify-center items-center my-4">
                        <svg height="3.25rem" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 196 36">
                          <path fill="none" d="M0 0h196v36H0z" />
                          <path
                            d="M195.036 10.656q-.504.108-1.367.396-.828.288-1.513.612-.455.192-.606.32l.03.076q.612 1.692.612 3.744 0 2.124-.576 3.78-.54 1.62-1.836 2.52-1.26.9-3.456.9-1.194 0-2.137-.296-.155.23-.346.548-.324.504-.324 1.008 0 .396.395.648.432.252 1.332.324l3.492.325q2.448.215 3.636 1.475t1.189 3.6q0 1.728-.829 2.916-.792 1.188-2.412 1.764-1.62.612-4.139.612-1.908 0-3.456-.432-1.513-.396-2.413-1.26-.864-.864-.864-2.268 0-1.08.504-1.907a5 5 0 0 1 1.296-1.369q.578-.42 1.194-.707-.902-.236-1.41-.77-.684-.72-.683-1.583 0-1.296.719-2.196a18 18 0 0 1 1.529-1.573q-1.129-.904-1.708-2.386-.613-1.657-.613-3.78 0-2.413.685-4.033.684-1.656 2.016-2.484 1.367-.864 3.347-.864 2.053 0 3.349 1.044.597.466 1.049 1.08.345-.443 1.146-1.044a10.8 10.8 0 0 1 2.16-1.26zm-10.584 17.63a16 16 0 0 0-.647.658 5 5 0 0 0-.72.9 2.14 2.14 0 0 0-.288 1.08q0 .936.792 1.404.828.468 2.916.468 2.051 0 3.023-.504 1.008-.468 1.008-1.512 0-.648-.252-1.08-.252-.396-.863-.648-.613-.252-1.765-.36zM77.378 0q2.953 0 4.68 1.116 1.728 1.116 2.484 3.168.792 2.052.792 4.932v11.088q0 2.844-.792 4.969-.756 2.124-2.483 3.311-1.728 1.152-4.681 1.152-2.952 0-4.716-1.152-1.763-1.152-2.52-3.275-.755-2.16-.756-5.04V9.216q0-2.88.757-4.932.791-2.088 2.52-3.168Q74.425 0 77.377 0m44.063 8.316q2.592 0 3.96 1.62 1.368 1.584 1.584 3.852l-2.735.972a9 9 0 0 0-.433-1.872q-.288-.828-.827-1.26-.54-.468-1.404-.468-.936 0-1.512.649-.54.612-.54 1.475 0 .54.216 1.08.252.504.828 1.008l3.672 3.384q.756.684 1.404 1.476a6.9 6.9 0 0 1 1.116 1.8q.432 1.008.432 2.34 0 1.764-.721 2.952a4.6 4.6 0 0 1-2.015 1.8q-1.296.576-3.025.576-2.555 0-4.103-1.584-1.548-1.62-1.764-4.248l3.203-.971q.288 1.98.973 2.987.684.972 2.016.972 1.044 0 1.584-.576.54-.612.54-1.62 0-.9-.396-1.62t-1.296-1.476l-3.564-3.06a10 10 0 0 1-1.836-2.088q-.72-1.152-.72-2.988 0-1.656.648-2.772a4.34 4.34 0 0 1 1.872-1.728q1.224-.612 2.843-.612m49.698 0q2.303 0 3.599.936 1.332.936 1.872 2.664.576 1.728.577 4.068v6.048q0 2.34-.577 4.069-.54 1.727-1.872 2.663-1.296.936-3.599.936t-3.636-.936q-1.332-.936-1.908-2.663-.54-1.729-.54-4.069v-6.048q0-2.34.54-4.068.576-1.728 1.908-2.664t3.636-.936M11.305 3.276H4.068v9.648h5.869v2.88H4.068v10.692h7.308v2.916H0V.252h11.305zM29.42 29.412h-3.853l-1.332-7.344h-5.94l-1.403 7.344h-3.817L19.27.252h3.923zm7.026-2.916H43.9v2.916H32.38V.252h4.068zm14.309 0h7.452v2.916h-11.52V.252h4.068zm14.453 2.916h-3.996V.252h3.996zM101.133.062q1.449 0 2.449.75 1 .7 1.5 2.1.5 1.35.5 3.3v23.2h-3.649v-22.4q0-2.25-.701-3.15-.65-.95-2.05-.95-1.25 0-2.55.75t-2.45 1.95v23.8h-3.65V.512h3.65v3a12.4 12.4 0 0 1 3.15-2.45 7.53 7.53 0 0 1 3.801-1m44.196.19q1.98 0 3.42.433 1.476.431 2.448 1.33.972.901 1.441 2.305.468 1.369.467 3.24 0 1.8-.467 3.132-.433 1.296-1.368 2.052-.9.756-2.34.972 1.764.396 2.843 1.368 1.08.936 1.584 2.448.54 1.476.54 3.564 0 1.872-.432 3.42-.431 1.548-1.367 2.629-.9 1.08-2.341 1.69-1.404.577-3.348.577h-7.776V.252zm16.071 29.16h-3.852V.252h3.852zm9.739-18.252q-1.116 0-1.584.684-.468.648-.576 1.692-.073 1.044-.073 2.233v6.515q0 1.152.073 2.232.108 1.044.576 1.692t1.584.648 1.548-.648q.468-.648.54-1.692.108-1.08.108-2.232V15.77q0-1.188-.108-2.233-.072-1.044-.54-1.692-.434-.684-1.548-.684M77.378 3.168q-1.62 0-2.484.648-.828.612-1.116 1.8-.288 1.152-.288 2.772v12.78q0 1.62.288 2.844.288 1.188 1.116 1.872.864.648 2.484.648t2.448-.648q.828-.684 1.116-1.872.288-1.224.289-2.844V8.388q0-1.62-.289-2.772-.288-1.188-1.116-1.8-.828-.648-2.448-.648M142.7 26.496h2.737q2.735 0 3.635-1.26.936-1.296.936-4.14 0-1.836-.504-3.06-.468-1.26-1.548-1.872-1.044-.648-2.844-.648H142.7zm43.659-15.444q-.792 0-1.296.324-.467.288-.755.9-.252.576-.361 1.44a24 24 0 0 0-.071 1.98q0 .972.071 1.8.109.829.361 1.44.252.612.719.972.504.324 1.296.324.793 0 1.261-.288.468-.324.684-.9.252-.576.324-1.404.107-.864.107-1.944t-.071-1.944q-.072-.864-.324-1.44-.252-.611-.72-.936-.469-.324-1.225-.324m-167.523 8.1h4.86l-2.448-13.14zM142.7 12.42h2.412q1.728 0 2.7-.468.972-.504 1.369-1.584.395-1.08.395-2.807 0-2.016-.612-2.916t-1.907-1.117q-1.296-.252-3.385-.252h-.972zm-28.64-8.676q0 2.808-.792 4.392-.793 1.548-2.773 1.656l-.684-1.44q1.116-.072 1.512-1.043.433-.972.433-2.989h-1.908V.252h4.212z" />
                        </svg>
                      </div>
                    </h1>
                    {{ with .Site.Params.Author.headline }}
                    <h2 class="mt-0 mb-0 text-xl text-neutral-800 dark:text-neutral-300">
                        {{ . | markdownify }}
                    </h2>
                    {{ end }}
                    <div class="my-3 text-2xl mt-4 mb-12">
                        {{ with .Site.Params.Author.links }}
                        <div class="flex flex-wrap">
                            {{ range $links := . }}
                            {{ range $name, $url := $links }}
                            <a class="hover:text-primary-400 text-primary-800 dark:text-primary-200 px-1"
                              href="{{ $url }}"
                              target="_blank"
                              aria-label="{{ $name | title }}"
                              title="{{ $name | title }}"
                              rel="me noopener noreferrer">
                              {{ partial "icon.html" $name }}
                            </a>
                            {{ end }}
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>

                    {{/* AnyNow Section */}}

                    <div class="anynow w-full bg-neutral-200/30 dark:bg-neutral-700/30 py-8 rounded-xl shadow-md my-10">
                      <div class="flex flex-col items-center">
                        <div class="flex flex-col md:flex-row items-center justify-center text-center pb-5 font-bold text-2xl mb-2">AnyNow Œ≤eta</div>
                        <div class="w-full max-w-11/12 h-3 bg-neutral-200 dark:bg-neutral-600 rounded-full">
                          <div id="anynow" class="h-full bg-primary-500 rounded-full" style="width: 62%"></div>
                        </div>
                        <div class="w-5/6 max-w-5/6 flex flex-col justify-start mt-8 mb-4">
                          <div class="relative flex items-center">
                            <div
                              class="z-10 h-6 w-6 rounded-full bg-blue-500 border-4 border-white ring-4 ring-blue-500 dark:border-neutral-700 dark:ring-blue-500 shrink-0">
                            </div>
                            <div class="ml-4 p-2 text-sm text-left font-medium text-gray-700 dark:text-gray-300">
                              <div class="flex flex-col lg:flex-row lg:items-center cursor-pointer mb-2">
                                <div
                                  class="rounded-md border border-primary-400 px-1 py-1 text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400 mb-2 lg:mb-0 lg:mr-2 w-fit">
                                  Nov 1, 2025</div>
                                <div class="text-base font-semibold text-gray-900 dark:text-white">[Now] Èõ∂Âè∑‰∫ã‰ª∂ AnyNow Œ≤eta ÁâàÊú¨ÂºÄÂèë‰∏≠</div>
                              </div>
                            </div>
                          </div>
                          <p class="text-xs text-left text-gray-500 dark:text-gray-400 mt-1 ml-12"> Work in process. Q4 2025, 62% completed. Directus deployed
                            as backend.</p>
                        </div>
                      </div>
                    </div>

                    {{/* Latest Article Section */}}
                    {{ range first 1 (.Paginate (where .Site.RegularPages "Type" "in" .Site.Params.mainSections)).Pages }}
                      <div class="w-full overflow-hidden transform transition duration-300 mt-12">
                        <div class="flex flex-col lg:flex-row items-center lg:items-start">
                          <div class="max-w-full lg:max-w-3/7 flex-shrink-0 mb-4">
                            <a href="{{ .Permalink }}">
                            <div
                              class="w-full relative aspect-[3/2] overflow-hidden rounded-md bg-blurple-gradient md:col-span-6 shadow-lg ring-blurple-500 group-hover:ring-2">
                              {{ $disableImageOptimization := site.Store.Get "disableImageOptimization" }}

                              {{ $page := .Page }}
                              {{ $featured := "" }}
                              {{ $featuredURL := "" }}
                              {{ if not .Params.hideFeatureImage }}
                                {{/* frontmatter */}}
                                {{ with $page }}
                                  {{ with .Params.featureimage }}
                                    {{ if or (strings.HasPrefix . "http:") (strings.HasPrefix . "https:") }}
                                      {{ if site.Params.hotlinkFeatureImage }}
                                        {{ $featuredURL = . }}
                                      {{ else }}
                                        {{ $featured = resources.GetRemote . }}
                                      {{ end }}
                                    {{ else }}
                                      {{ $featured = resources.Get . }}
                                    {{ end }}
                                  {{ end }}

                                  {{/* page resources */}}
                                  {{ if not (or $featured $featuredURL) }}
                                    {{ $images := .Resources.ByType "image" }}
                                    {{ range slice "*feature*" "*cover*" "*thumbnail*" }}
                                      {{ if not $featured }}{{ $featured = $images.GetMatch . }}{{ end }}
                                    {{ end }}
                                  {{ end }}

                                  {{/* fallback to default */}}
                                  {{ if not (or $featured $featuredURL) }}
                                    {{ $default := site.Store.Get "defaultFeaturedImage" }}
                                    {{ if $default.url }}
                                      {{ $featuredURL = $default.url }}
                                    {{ else if $default.obj }}
                                      {{ $featured = $default.obj }}
                                    {{ end }}
                                  {{ end }}

                                  {{/* generate image URL if not hotlink */}}
                                  {{ if not $featuredURL }}
                                    {{ with $featured }}
                                      {{ $featuredURL = .RelPermalink }}
                                      {{ if not (or $disableImageOptimization (eq .MediaType.SubType "svg")) }}
                                        {{ $featuredURL = (.Resize "600x").RelPermalink }}
                                      {{ end }}
                                    {{ end }}
                                  {{ end }}
                                {{ end }}
                              {{ end }}
                              {{ with $featuredURL }}
                              <img src="{{ . }}" alt="{{ $page.Title | plainify }}" loading="lazy" decoding="async"
                                class="inset-0 w-full h-full object-cover mt-0 mb-0">
                              {{ end }}
                            </div></a>
                          </div>

                          <div class="px-0 lg:px-6 flex flex-col h-full">
                            <div
                              class="flex flex-col lg:flex-row items-start lg:items-center gap-x-4 text-sm text-neutral-500 dark:text-neutral-400">
                              <time datetime="{{ .Date }}">{{ .Date | time.Format (site.Language.Params.dateFormat | default ":date_long")
                                }}</time>
                              <div class="flex flex-row flex-wrap items-center">
                                {{ with .GetTerms "categories" }}
                                {{ range . }}
                                <a class="relative me-2" href="{{ .Permalink }}">
                                  <span class="flex cursor-pointer">
                                    <span
                                      class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">{{
                                      .LinkTitle }}
                                    </span>
                                  </span>
                                </a>
                                {{ end }}
                                {{ end }}
                                <div class="mr-2">&middot;</div>
                                {{ with .GetTerms "tags" }}
                                {{ range . }}
                                <a class="relative me-2" href="{{ .Permalink }}">
                                  <span class="flex cursor-pointer">
                                    <span
                                      class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">{{
                                      .LinkTitle }}
                                    </span>
                                  </span>
                                </a>
                                {{ end }}
                                {{ end }}
                              </div>
                            </div>
                            <div class="relative flex flex-col items-start my-4">
                              <a href="{{ .Permalink }}"
                                class="not-prose before:absolute before:inset-0 decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 hover:underline hover:underline-offset-2">
                                <h2 class="inline"><svg class="ml-1" width="1.5em" height="1.5em" viewBox="0 0 1024 1024">
                                    <path fill="#EE502F"
                                      d="M246 287h553c125 0 225 100 225 225S924 737 799 737H0V532c0-135 111-245 246-245m133 348V401h-31v179L236 401h-31v234h31V457l112 178zm182-109v-24h-96v-76h110v-25H434v234h144v-25H465v-84zm101 29-35-152h-35l55 234h29l47-162 4-20 4 20 47 162h29l57-234h-35l-32 152-4 31-7-31-41-152h-30l-41 152-6 31z" />
                                  </svg> {{ .Title | emojify }}</h2>
                              </a>
                              <p class="text-left mb-0 line-clamp-none lg:line-clamp-6">ÊëòË¶ÅÔºö{{ .Summary | markdownify | safeHTML }}</p>
                            </div>
                          </div>
                        </div>
                      </div>
                    {{ end }}

                </div>
            </div>
        </div>
    </div>
</section>

<section>

    <h2 class="mt-8 text-2xl font-extrabold mb-10">{{ i18n "shortcode.recent_articles" }}</h2>

    <section class="home-article w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3">
      {{ $pages := where .Site.RegularPages "Type" "in" .Site.Params.mainSections }}
      {{ $paginatedPages := .Paginate $pages }}
      {{ $filteredPages := after 1 $paginatedPages.Pages }}
      {{ range first 6 $filteredPages }}
        {{ partial "article-link/card.html" . }}
      {{ end }}
    </section>

    <div class="mt-10 flex justify-center">
    <a href="/blog">
        <button class="bg-transparent hover:text-primary-500 prose dark:prose-invert font-semibold hover:text-white py-2 px-4 border border-primary-500 hover:border-transparent rounded cursor-pointer" type="button">
        {{ i18n "recent.show_more" | markdownify }}
        </button>
    </a>
    </div>

</section>

{{ if .Site.Params.homepage.layoutBackgroundBlur | default false }}
<div id="background-blur" class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div>

<script>
  // ËÆ°ÁÆóÁõ∏ÂØπÊó∂Èó¥ÁöÑÂáΩÊï∞
  function getRelativeTime(date) {
    const rtf = new Intl.RelativeTimeFormat('zh-CN', { numeric: "auto", style: 'short' });

    const now = new Date();
    const diff = now - date;

    const seconds = Math.floor(diff / 1000);
    const minutes = Math.floor(seconds / 60);
    const hours = Math.floor(minutes / 60);
    const days = Math.floor(hours / 24);
    const months = Math.floor(days / 30);
    const years = Math.floor(days / 365);

    if (years > 0) {
      return rtf.format(-years, 'year');
    } else if (months > 0) {
      return rtf.format(-months, 'month');
    } else if (days > 0) {
      return rtf.format(-days, 'day');
    } else if (hours > 0) {
      return rtf.format(-hours, 'hour');
    } else if (minutes > 0) {
      return rtf.format(-minutes, 'minute');
    } else {
      return rtf.format(-seconds, 'second');
    }
  }

  // Êõ¥Êñ∞Áõ∏ÂØπÊó∂Èó¥ÊòæÁ§∫
  function updateRelativeTimes() {
    const timeElements = document.querySelectorAll('.ticker-item .datetime[data-time]');
    timeElements.forEach(element => {
      const timeStr = element.getAttribute('data-time');
      if (timeStr) {
        const date = new Date(timeStr);
        element.textContent = getRelativeTime(date);
      }
    });
  }

  // ÊªöÂä®ÊïàÊûú
  function slideTickerItem() {
    const tickerItems = document.querySelectorAll('.ticker-item');
    if (tickerItems.length > 1) {
      const activeItem = document.querySelector('.ticker-item.active');
      if (activeItem) {
        const nextIndex = (parseInt(activeItem.getAttribute('data-index')) + 1) % tickerItems.length;
        const nextItem = document.querySelector(`.ticker-item[data-index="${nextIndex}"]`);

        if (nextItem) {
          activeItem.classList.remove('active');
          activeItem.classList.add('out');
          nextItem.classList.add('in');

          setTimeout(() => {
            activeItem.classList.remove('out');
            nextItem.classList.remove('in');
            nextItem.classList.add('active');
          }, 300);
        }
      }
    }
    setTimeout(slideTickerItem, 3000);
  }

  // ÂàùÂßãÂåñ
  if (document.querySelector('#ticker')) {
    // Êõ¥Êñ∞Áõ∏ÂØπÊó∂Èó¥
    updateRelativeTimes();

    // ÂêØÂä®ÊªöÂä®ÊïàÊûú
    slideTickerItem();

    // ÂÆöÊúüÊõ¥Êñ∞Áõ∏ÂØπÊó∂Èó¥ÔºàÊØèÂàÜÈíüÊõ¥Êñ∞‰∏ÄÊ¨°Ôºâ
    setInterval(updateRelativeTimes, 60000);
  }
</script>
{{ $backgroundBlur := resources.Get "js/background-blur.js" }}
{{ $backgroundBlur = $backgroundBlur | resources.Minify | resources.Fingerprint (.Site.Params.fingerprintAlgorithm | default "sha512") }}
<script
  type="text/javascript"
  src="{{ $backgroundBlur.RelPermalink }}"
  integrity="{{ $backgroundBlur.Data.Integrity }}"
  data-target-id="background-blur"
  data-image-id="background-image"
  {{ if $homepageImage }}data-image-url="{{ $homepageImage.RelPermalink }}"{{ end }}></script>

{{ end }}
