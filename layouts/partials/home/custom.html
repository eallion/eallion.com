{{ $disableImageOptimization := .Site.Params.disableImageOptimization | default false }}

<!-- <meta http-equiv="onion-location" content="http://eallionskii7e32j3ncxnccyqq6uf7rbxwmst4x6mxeswx6fvrdtsmad.onion" /> -->

<article class="max-w-full prose dark:prose-invert">
    <div class="relative">
        <div class="absolute inset-x-0 bottom-0 h-1/2 bg-gray-100"></div>
        <div class="mx-auto max-w-7xl p-0">
            <div class="relative sm:overflow-hidden">
                <div class="fixed inset-x-0 top-0" style="z-index:-10">
                    {{ $homepageImage := "" }}
                    {{ with .Site.Params.defaultBackgroundImage }}
                        {{ if or (strings.HasPrefix . "http:") (strings.HasPrefix . "https:") }}
                            {{ $homepageImage = resources.GetRemote . }}
                        {{ else }}
                            {{ $homepageImage = resources.Get . }}
                        {{ end }}
                    {{ end }}
                    {{ with .Site.Params.homepage.homepageImage }}
                        {{ if or (strings.HasPrefix . "http:") (strings.HasPrefix . "https:") }}
                            {{ $homepageImage = resources.GetRemote . }}
                        {{ else }}
                            {{ $homepageImage = resources.Get . }}
                        {{ end }}
                    {{ end }}
                    {{ if $homepageImage }}
                    <img class="w-full h-[1000px] object-cover m-0 nozoom" src="{{ $homepageImage.RelPermalink }}" role="presentation">
                    <div
                        class="absolute inset-0 h-[1000px] bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal">
                    </div>
                    <div
                        class="opacity-60 absolute inset-0 h-[1000px] bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal">
                    </div>
                    {{ end }}
                </div>
                <div class="relative px-1 py-1 flex flex-col items-center justify-center text-center">
                    {{ with .Site.Author.image }}
                        {{ $authorImage := "" }}
                        {{ if or (strings.HasPrefix . "http:") (strings.HasPrefix . "https:") }}
                            {{ $authorImage = resources.GetRemote . }}
                        {{ else }}
                            {{ $authorImage = resources.Get . }}
                        {{ end }}
                        {{ if $authorImage }}
                            {{ if not $disableImageOptimization }}
                                {{ $authorImage = $authorImage.Fill "288x288" }}
                            {{ end }}
                            <div class="tailwind-ticker w-auto relative group flex items-end transition-all duration-300">
                                <div class="rounded-full overflow-hidden min-w-[144px]">
                                    <img class="mb-2 rounded-full h-36 w-36 nozoom" width="144" height="144"
                                    alt="{{ $.Site.Author.name | default " Author" }}" src="{{ $authorImage.RelPermalink }}" />
                                </div>
                                <div class="absolute bottom-0 left-full -ml-9 mb-1 w-8 h-8 rounded-full flex items-center justify-center group-hover:w-min group-hover:h-8 group-hover:rounded-lg transition-all duration-300">
                                    <div class="ticker hidden sm:flex w-9 sm:w-[226px] md:w-[295px] lg:w-[476px] min-w-[36px] transition-all duration-300">
                                        <div id="ticker"></div>
                                    </div>
                                </div>
                            </div>

                        {{ end }}
                    {{ end }}
                    <h1 class="mb-2 text-4xl font-extrabold text-neutral-800 dark:text-neutral-200">
                        {{ .Site.Author.name | default .Site.Title }}
                        {{/*  {{ T `blog_title` | safeHTML }}  */}}
                    </h1>
                    {{/*  {{ with .Site.Author.headline }}  */}}
                    <h2 class="mt-0 mb-0 text-xl text-neutral-800 dark:text-neutral-300">
                        {{/*  {{ . | markdownify }}  */}}
                        <div id="poem_sentence" class="min-h-7 text-base md:text-xl">{{ partial "icon.html" "loading" }}</div>
                        {{/*  <div>{{ T `toot_motto` | safeHTML }} - <span class="italic text-base">Louis Pasteur</span></div>  */}}
                    </h2>
                    {{/*  {{ end }}  */}}
                    <div class="my-3 text-2xl">
                        {{ with .Site.Author.links }}
                        <div class="flex flex-wrap">
                            {{ range $links := . }}
                            {{ range $name, $url := $links }}
                            <a class="px-1 hover:text-primary-400 text-primary-800 dark:text-primary-200" href="{{ $url }}" target="_blank"
                                aria-label="{{ $name | title }}" rel="me noopener noreferrer">{{ partial
                                "icon.html" $name }}</a>
                            {{ end }}
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>

                    <div class="tailwindcss-heatmap flex flex-col items-end text-[10px] leading-[12px] text-neutral-700 dark:text-neutral-400">
                        <div class="flex flex-row items-end">

                            <div class="flex flex-col justify-end items-end mr-1 mt-1 text-right">
                                <span>Mon</span>
                                <span>&nbsp;</span>
                                <span>Wed</span>
                                <span>&nbsp;</span>
                                <span>Fri</span>
                                <span>&nbsp;</span>
                                <span>Sun</span>
                            </div>

                            <div class="heatmap">
                                <div class="month mb-1 flex justify-around">
                                </div>
                                <div class="h-[84px]">
                                    <div id="heatmap" class="flex flex-row"></div>
                                </div>
                            </div>

                        </div>

                        <div class="flex mt-2 items-center">
                            <span class="">{{ T `heatmap_less` | safeHTML }}</span>
                            <div class="flex flex-row items-center gap-[2px] w-max h-[10px] mx-1">
                                <span class="block w-[10px] h-[10px] rounded-sm bg-[#ebedf0] dark:bg-[#161b22]"></span>
                                <span class="block w-[10px] h-[10px] rounded-sm bg-[#9be9a8] dark:bg-[#0e4429]"></span>
                                <span class="block w-[10px] h-[10px] rounded-sm bg-[#40c463] dark:bg-[#006d32]"></span>
                                <span class="block w-[10px] h-[10px] rounded-sm bg-[#30a14e] dark:bg-[#26a641]"></span>
                                <span class="block w-[10px] h-[10px] rounded-sm bg-[#216e39] dark:bg-[#39d353]"></span>
                            </div>
                            <span class="">{{ T `heatmap_more` | safeHTML }}</span>
                        </div>

                    </div>

                    <script type="text/javascript">
                        // è·å–æœ€è¿‘ä¸€å¹´çš„æ–‡ç« æ•°æ®
                        {{ $pages := where .Site.RegularPages "Date" ">" (now.AddDate -1 0 0) }}
                        {{ $pages := $pages.Reverse }}
                        var blogInfo = {
                            "pages": [
                                {{ range $index, $element := $pages }}
                                    {
                                        "title": "{{ replace (replace .Title "ã€Š" "ã€ˆ") "ã€‹" "ã€‰" }}",
                                        "date": "{{ .Date.Format "2006-01-02" }}",
                                        "year": "{{ .Date.Format "2006" }}",
                                        "month": "{{ .Date.Format "01" }}",
                                        "day": "{{ .Date.Format "02" }}",
                                        "word_count": "{{ .WordCount }}"
                                    }{{ if ne (add $index 1) (len $pages) }},{{ end }}
                                    {{ end }}
                            ]
                        };
                        // console.log(blogInfo)

                        let currentDate = new Date();
                        currentDate.setFullYear(currentDate.getFullYear() - 1);

                        let startDate;

                        let monthDiv = document.querySelector('.month');
                        let monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

                        if (window.innerWidth < 768) {
                            numMonths = 6;
                        } else {
                            numMonths = 12;
                        }

                        let startMonthIndex = (currentDate.getMonth() - (numMonths - 1) + 12) % 12;
                        for (let i = startMonthIndex; i < startMonthIndex + numMonths; i++) {
                            let monthSpan = document.createElement('span');
                            let monthIndex = i % 12;
                            monthSpan.textContent = monthNames[monthIndex];
                            monthDiv.appendChild(monthSpan);
                        }

                        function getStartDate() {
                            const today = new Date();

                            if (window.innerWidth < 768) {
                                numMonths = 6;
                            } else {
                                numMonths = 12;
                            }

                            const startDate = new Date(today.getFullYear(), today.getMonth() - numMonths + 1, 1, today.getHours(), today.getMinutes(), today.getSeconds());

                            while (startDate.getDay() !== 1) {
                                startDate.setDate(startDate.getDate() + 1);
                            }

                            return startDate;
                        }

                        function getWeekDay(date) {
                            const day = date.getDay();
                            return day === 0 ? 6 : day - 1;
                        }

                        function createDay(date, title, count, post) {
                            const day = document.createElement("div");

                            day.className = "heatmap_day";

                            day.setAttribute("data-title", title);
                            day.setAttribute("data-count", count);
                            day.setAttribute("data-post", post);
                            day.setAttribute("data-date", date);

                            day.addEventListener("mouseenter", function () {
                                const tooltip = document.createElement("div");
                                tooltip.className = "heatmap_tooltip";

                                let tooltipContent = "";

                                if (post && parseInt(post, 10) !== 0) {
                                    tooltipContent += '<span class="heatmap_tooltip_post">' + 'å…± ' + post + ' ç¯‡' + '</span>';
                                }

                                if (count && parseInt(count, 10) !== 0) {
                                    tooltipContent += '<span class="heatmap_tooltip_count">' + ' ' + count + ' å­—ï¼›' + '</span>';
                                }

                                if (title && parseInt(title, 10) !== 0) {
                                    tooltipContent += '<span class="heatmap_tooltip_title">' + title + '</span>';
                                }

                                if (date) {
                                    tooltipContent += '<span class="heatmap_tooltip_date">' + date + '</span>';
                                }

                                tooltip.innerHTML = tooltipContent;
                                day.appendChild(tooltip);
                            });

                            day.addEventListener("mouseleave", function () {
                                const tooltip = day.querySelector(".heatmap_tooltip");
                                if (tooltip) {
                                    day.removeChild(tooltip);
                                }
                            });

                            if (count == 0 ) {
                                day.classList.add("heatmap_day_level_0");
                            } else if (count > 0 && count < 1000) {
                                day.classList.add("heatmap_day_level_1");
                            } else if (count >= 1000 && count < 2000) {
                                day.classList.add("heatmap_day_level_2");
                            } else if (count >= 2000 && count < 3000) {
                                day.classList.add("heatmap_day_level_3");
                            } else {
                                day.classList.add("heatmap_day_level_4");
                            }

                            return day;
                        }

                        function createWeek() {
                            const week = document.createElement('div');
                            week.className = 'heatmap_week';
                            return week;
                        }

                        function createHeatmap() {
                            const container = document.getElementById('heatmap');
                            const startDate = getStartDate();
                            const endDate = new Date();
                            const weekDay = getWeekDay(startDate);

                            let currentWeek = createWeek();
                            container.appendChild(currentWeek);

                            let currentDate = startDate;
                            let i = 0;

                            while (currentDate <= endDate) {
                                if (i % 7 === 0 && i !== 0) {
                                    currentWeek = createWeek();
                                    container.appendChild(currentWeek);
                                }

                                const dateString = `${currentDate.getFullYear()}-${("0" + (currentDate.getMonth()+1)).slice(-2)}-${("0" + (currentDate.getDate())).slice(-2)}`;

                                const articleDataList = blogInfo.pages.filter(page => page.date === dateString);

                                if (articleDataList.length > 0) {
                                    const titles = articleDataList.map(data => data.title);
                                    const title = titles.map(t => `ã€Š${t}ã€‹`).join('<br />');

                                    let count = 0;
                                    let post = articleDataList.length;

                                    articleDataList.forEach(data => {
                                        count += parseInt(data.word_count, 10);
                                    });

                                    const formattedDate = formatDate(currentDate);
                                    const day = createDay(formattedDate, title, count, post);
                                    currentWeek.appendChild(day);
                                } else {
                                    const formattedDate = formatDate(currentDate);
                                    const day = createDay(formattedDate, '', '0', '0');
                                    currentWeek.appendChild(day);
                                }

                                i++;
                                currentDate.setDate(currentDate.getDate() + 1);
                            }
                        }

                        function formatDate(date) {
                            const options = { month: 'short', day: 'numeric', year: 'numeric' };
                            return date.toLocaleDateString('en-US', options);
                        }

                        createHeatmap();

                    </script>

                    <section class="prose dark:prose-invert">{{ .Content }}</section>

                </div>
            </div>
        </div>
    </div>
</article>
<section>
    {{ $recentArticles := 5 }}
    {{ $showMoreLinkDest := "/posts" }}
    {{ if .Site.Params.homepage.showRecent | default false }}
    {{ if index .Site.Params.homepage "showRecentItems" }}
    {{ $recentArticles = .Site.Params.homepage.showRecentItems }}
    {{ end }}
    <h2 class="mt-8 text-2xl font-extrabold mb-10">{{ i18n "shortcode.recent_articles" }}</h2>

    {{ if and .Site.Params.homepage.cardView (not .Site.Params.homepage.cardViewScreenWidth) | default false }}
    {{ partial "recent-articles/cardview.html" . }}
    {{ else if and .Site.Params.homepage.cardView .Site.Params.homepage.cardViewScreenWidth | default false }}
    {{ partial "recent-articles/cardview-fullwidth.html" . }}
    {{ else }}
    {{ partial "recent-articles/list.html" . }}
    {{ end }}

    {{ if .Site.Params.homepage.showMoreLink | default false }}
    {{ if index .Site.Params.homepage "showRecentItems" }}
    {{ $showMoreLinkDest = .Site.Params.homepage.showMoreLinkDest }}
    {{ end }}
    <div class="mt-10 flex justify-center">
    <a href="{{ $showMoreLinkDest }}">
        <button
        class="bg-transparent hover:text-primary-500 prose dark:prose-invert font-semibold hover:text-white py-2 px-4 border border-primary-500 hover:border-transparent rounded">
        {{ i18n "recent.show_more" | markdownify }}
        </button>
    </a>
    </div>
    {{ end }}
    {{ end }}
</section>
{{ if .Site.Params.homepage.layoutBackgroundBlur | default false }}
<div id="background-blur" class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div>

<!--  <script type="text/javascript">
    /**
    * ä»Šæ—¥è¯—è¯V2 JS-SDK 1.2.2
    * ä»Šæ—¥è¯—è¯API æ˜¯ä¸€ä¸ªå¯ä»¥å…è´¹è°ƒç”¨çš„è¯—è¯æ¥å£ï¼šhttps://www.jinrishici.com
    */
    !function(e){var n,t={},o="jinrishici-token";function i(){return document.getElementById("jinrishici-sentence")||0!=document.getElementsByClassName("jinrishici-sentence").length}function c(){t.load(function(e){var n=document.getElementById("jinrishici-sentence"),t=document.getElementsByClassName("jinrishici-sentence");if(n&&(n.innerText=e.data.content),0!==t.length)for(var o=0;o<t.length;o++)t[o].innerText=e.data.content})}function r(e,n){var t=new XMLHttpRequest;t.open("get",n),t.withCredentials=!0,t.send(),t.onreadystatechange=function(n){if(4===t.readyState){var o=JSON.parse(t.responseText);"success"===o.status?e(o):console.error("ä»Šæ—¥è¯—è¯APIåŠ è½½å¤±è´¥ï¼Œé”™è¯¯åŸå› ï¼š"+o.errMessage)}}}t.load=function(n){return e.localStorage&&e.localStorage.getItem(o)?function(e,n){return r(e,"https://v2.jinrishici.com/one.json?client=browser-sdk/1.2&X-User-Token="+encodeURIComponent(n))}(n,e.localStorage.getItem(o)):function(n){return r(function(t){e.localStorage.setItem(o,t.token),n(t)},"https://v2.jinrishici.com/one.json?client=browser-sdk/1.2")}(n)},e.jinrishici=t,i()?c():(n=function(){i()&&c()},"loading"!=document.readyState?n():document.addEventListener?document.addEventListener("DOMContentLoaded",n):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&n()}))}(window);

    jinrishici.load(function(result) {
        var sentence = document.querySelector("#poem_sentence")
        sentence.innerHTML = result.data.content
    });

</script>  -->

<script>
    const poemSentences = [
        "ä¸€ç”Ÿå¤§ç¬‘èƒ½å‡ å›ï¼Œæ–—é…’ç›¸é€¢é¡»é†‰å€’ã€‚",
        "æŠŠé…’å¯¹æ–œæ—¥ï¼Œæ— è¯­é—®è¥¿é£ã€‚",
        "çº¢é…¥æ‰‹ï¼Œé»„ç¸¢é…’ï¼Œæ»¡åŸæ˜¥è‰²å®«å¢™æŸ³ã€‚",
        "è¢«é…’è«æƒŠæ˜¥ç¡é‡ï¼ŒèµŒä¹¦æ¶ˆå¾—æ³¼èŒ¶é¦™ï¼Œå½“æ—¶åªé“æ˜¯å¯»å¸¸ã€‚",
        "æŠŠé…’ç¥ä¸œé£ã€‚ä¸”å…±ä»å®¹ã€‚",
        "é…’å…¥æ„è‚ ï¼ŒåŒ–ä½œç›¸æ€æ³ªã€‚",
        "ç™½æ—¥æ”¾æ­Œé¡»çºµé…’ï¼Œé’æ˜¥ä½œä¼´å¥½è¿˜ä¹¡ã€‚",
        "å…°é™µç¾é…’éƒé‡‘é¦™ï¼Œç‰ç¢—ç››æ¥ç¥ç€å…‰ã€‚",
        "ç»¿èšæ–°é†…é…’ï¼Œçº¢æ³¥å°ç«ç‚‰ã€‚",
        "ä¸€å£¶é…’ï¼Œä¸€ç«¿èº«ï¼Œå¿«æ´»å¦‚ä¾¬æœ‰å‡ äººã€‚",
        "é£å¹æŸ³èŠ±æ»¡åº—é¦™ï¼Œå´å§¬å‹é…’å”¤å®¢å°ã€‚",
        "é…’å€ºå¯»å¸¸è¡Œå¤„æœ‰ï¼Œäººç”Ÿä¸ƒåå¤æ¥ç¨€ã€‚",
        "ä¸”å°±æ´åº­èµŠæœˆè‰²ï¼Œå°†èˆ¹ä¹°é…’ç™½äº‘è¾¹ã€‚",
        "å”¯æ„¿å½“æ­Œå¯¹é…’æ—¶ï¼Œæœˆå…‰é•¿ç…§é‡‘æ¨½é‡Œã€‚",
        "æ–°ä¸°ç¾é…’æ–—ååƒï¼Œå’¸é˜³æ¸¸ä¾ å¤šå°‘å¹´ã€‚",
        "æœ±å¼¦å·²ä¸ºä½³äººç»ï¼Œé’çœ¼èŠå› ç¾é…’æ¨ªã€‚",
        "æµŠé…’ä¸€æ¯å®¶ä¸‡é‡Œï¼Œç‡•ç„¶æœªå‹’å½’æ— è®¡ã€‚",
        "ä¸œç¯±æŠŠé…’é»„æ˜åï¼Œæœ‰æš—é¦™ç›ˆè¢–ã€‚",
        "æ„è‚ å·²æ–­æ— ç”±é†‰ï¼Œé…’æœªåˆ°ï¼Œå…ˆæˆæ³ªã€‚",
        "æ˜¨å¤œé›¨ç–é£éª¤ï¼Œæµ“ç¡ä¸æ¶ˆæ®‹é…’ã€‚",
        "ç¬‘å°½ä¸€æ¯é…’ï¼Œæ€äººéƒ½å¸‚ä¸­ã€‚",
        "å¹¸é‡ä¸‰æ¯é…’å¥½ï¼Œå†µé€¢ä¸€æœµèŠ±æ–°ã€‚",
        "é…’å›°è·¯é•¿æƒŸæ¬²ç¡ï¼Œæ—¥é«˜äººæ¸´æ¼«æ€èŒ¶ã€‚",
        "ä¸ºå›æŒé…’åŠæ–œé˜³ï¼Œä¸”å‘èŠ±é—´ç•™æ™šç…§ã€‚",
        "é¥çŸ¥æ¹–ä¸Šä¸€æ¨½é…’ï¼Œèƒ½å¿†å¤©æ¶¯ä¸‡é‡Œäººã€‚",
        "è·èŠ±å¼€åè¥¿æ¹–å¥½ï¼Œè½½é…’æ¥æ—¶ã€‚",
        "é‡‘æ¨½æ¸…é…’æ–—ååƒï¼Œç‰ç›˜çç¾ç›´ä¸‡é’±ã€‚",
        "ç»¿é…’åˆå°äººæ˜“é†‰ã€‚ä¸€æ•å°çª—æµ“ç¡ã€‚",
        "ä¸”ä¹ç”Ÿå‰ä¸€æ¯é…’ï¼Œä½•é¡»èº«ååƒè½½åï¼Ÿ",
        "ç¬‘æ€é™¶æ¸Šæ˜ï¼Œä¸é¥®æ¯ä¸­é…’ã€‚",
        "ä¸‰äº”å¹´æ—¶ä¸‰äº”æœˆï¼Œå¯æ€œæ¯é…’ä¸æ›¾æ¶ˆã€‚",
        "çº¢å¶æ™šè§è§ï¼Œé•¿äº­é…’ä¸€ç“¢ã€‚",
        "æµŠé…’ä¸é”€å¿§å›½æ³ªï¼Œæ•‘æ—¶åº”ä»—å‡ºç¾¤æ‰ã€‚",
        "è°çŸ¥æ±Ÿä¸Šé…’ï¼Œè¿˜ä¸æ•…äººå€¾ã€‚",
        "äººç”Ÿæœ‰é…’é¡»å½“é†‰ï¼Œä¸€æ»´ä½•æ›¾åˆ°ä¹æ³‰ã€‚",
        "è½½é…’ä¹°èŠ±å¹´å°‘äº‹ï¼Œæµ‘ä¸ä¼¼ï¼Œæ—§å¿ƒæƒ…ã€‚",
        "åŠå¤©å‡‰æœˆè‰²ï¼Œä¸€ç¬›é…’äººå¿ƒã€‚",
        "ä»Šæ—¥å¬å›æ­Œä¸€æ›²ï¼Œæš‚å‡­æ¯é…’é•¿ç²¾ç¥ã€‚",
        "è‰°éš¾è‹¦æ¨ç¹éœœé¬“ï¼Œæ½¦å€’æ–°åœæµŠé…’æ¯ã€‚",
        "éš”åº§é€é’©æ˜¥é…’æš–ï¼Œåˆ†æ›¹å°„è¦†èœ¡ç¯çº¢ã€‚",
        "æ°´è°ƒæ•°å£°æŒé…’å¬ã€‚åˆé†‰é†’æ¥æ„æœªé†’ã€‚",
        "å…‰é˜´è™šæ·ã€‚",
        "æ— èŠ±æ— é…’è¿‡æ¸…æ˜ï¼Œå…´å‘³è§ç„¶ä¼¼é‡åƒ§ã€‚",
        "é…’æµ“æ˜¥å…¥æ¢¦ï¼Œçª—ç ´æœˆå¯»äººã€‚",
        "å°æ¡¥å®…ï¼Œæ€•æ¢¨èŠ±è½å°½æˆç§‹è‰²ã€‚",
        "ä¸‡é‡Œä¸­åŸçƒ½ç«åŒ—ï¼Œä¸€å°ŠæµŠé…’æˆæ¥¼ä¸œã€‚",
        "é…’ç›ˆæ¯ï¼Œä¹¦æ»¡æ¶ï¼Œååˆ©ä¸å°†å¿ƒæŒ‚ã€‚",
        "åº­è½©å¯‚å¯è¿‘æ¸…æ˜ï¼Œæ®‹èŠ±ä¸­é…’ï¼Œåˆæ˜¯å»å¹´ç—…ã€‚",
        "å¯¹é…’å½“æ­Œï¼Œå¼ºä¹è¿˜æ— å‘³ã€‚",
        "ä»–ä¹¡å…±é…Œé‡‘èŠ±é…’ï¼Œä¸‡é‡ŒåŒæ‚²é¸¿é›å¤©ã€‚",
        "å¿ƒæ–­æ–°ä¸°é…’ï¼Œé”€æ„æ–—å‡ åƒã€‚",
        "é€è¡Œæ— é…’äº¦æ— é’±ï¼ŒåŠå°”ä¸€æ¯è©è¨æ³‰ã€‚",
        "ç™½é…’æ–°ç†Ÿå±±ä¸­å½’ï¼Œé»„é¸¡å•„é»ç§‹æ­£è‚¥ã€‚",
        "è‹¥å¾…å¾—å›æ¥å‘æ­¤ï¼ŒèŠ±å‰å¯¹é…’ä¸å¿è§¦ã€‚",
        "ç©·æ„åƒä¸‡ç«¯ï¼Œç¾é…’ä¸‰ç™¾æ¯ã€‚",
        "ä¹æ—¥æ˜æœé…’é¦™ï¼Œä¸€å¹´å¥½æ™¯æ©™é»„ã€‚",
        "æ—¥æ—¥æ·±æ¯é…’æ»¡ï¼Œæœæœå°åœƒèŠ±å¼€ã€‚",
        "å´é…’ä¸€æ¯æ˜¥ç«¹å¶ï¼Œå´å¨ƒåŒèˆé†‰èŠ™è“‰ã€‚",
        "å°é…Œé…’å·¡é”€æ°¸å¤œï¼Œå¤§å¼€å£ç¬‘é€æ®‹å¹´ã€‚",
        "ä¸æ€•é£ç‹‚é›¨éª¤ï¼Œæ°æ‰ç§°ï¼Œç…®é…’ç¬ºèŠ±ã€‚",
        "ä»Šæ—¥æš‚åŒèŠ³èŠé…’ï¼Œæ˜æœåº”ä½œæ–­è“¬é£ã€‚",
        "æ¾å¶å ªä¸ºé…’ï¼Œæ˜¥æ¥é…¿å‡ å¤šã€‚",
        "å¾—æ¬¢å½“ä½œä¹ï¼Œæ–—é…’èšæ¯”é‚»ã€‚",
        "é…’ç›æ—‹å°†è·å¶å½“ã€‚è²èˆŸè¡ã€‚æ—¶æ—¶ç›é‡Œç”Ÿçº¢æµªã€‚",
        "å±±è¿œè¿‘ï¼Œè·¯æ¨ªæ–œï¼Œé’æ——æ²½é…’æœ‰äººå®¶ã€‚",
        "è€äººä¸ƒåä»æ²½é…’ï¼Œåƒå£¶ç™¾ç“®èŠ±é—¨å£ã€‚",
        "é…’ç¾æ¢…é…¸ï¼Œæ°ç§°äººæ€€æŠ±ã€‚",
        "æ®‹é…’å¿†è†é«˜ï¼Œç‡•èµµæ‚²æ­Œäº‹æœªæ¶ˆã€‚",
        "å‡ åº¦æ€å½’è¿˜æŠŠé…’ï¼Œæ‹‚äº‘å †ä¸Šç¥æ˜å¦ƒã€‚",
        "é…Œé…’ä»¥è‡ªå®½ï¼Œä¸¾æ¯æ–­ç»æ­Œè·¯éš¾ã€‚",
        "æ˜¥æ±ŸèŠ±æœç§‹æœˆå¤œï¼Œå¾€å¾€å–é…’è¿˜ç‹¬å€¾ã€‚",
        "é…’é˜‘æ›´å–œå›¢èŒ¶è‹¦ï¼Œæ¢¦æ–­åå®œç‘è„‘é¦™ã€‚",
        "æ˜“é†‰æ‰¶å¤´é…’ï¼Œéš¾é€¢æ•Œæ‰‹æ£‹ã€‚",
        "é…Œé…’ä¼šä¸´æ³‰æ°´ï¼ŒæŠ±ç´å¥½å€šé•¿æ¾ã€‚",
        "æ–­é¦™æ®‹é…’æƒ…æ€€æ¶ã€‚è¥¿é£å‚¬è¡¬æ¢§æ¡è½ã€‚",
        "å¼ºæ¬²ç™»é«˜å»ï¼Œæ— äººé€é…’æ¥ã€‚",
        "è½èŠ±ç‹¼è—‰é…’é˜‘çŠï¼Œç¬™æ­Œé†‰æ¢¦é—´ã€‚",
        "æœ¨å…°èˆŸä¸Šç å¸˜å·ï¼Œæ­Œå£°è¿œï¼Œæ¤°å­é…’å€¾é¹¦é¹‰ç›ã€‚",
        "èŠ±æ—¶åŒé†‰ç ´æ˜¥æ„ï¼Œé†‰æŠ˜èŠ±æä½œé…’ç­¹ã€‚",
        "è„±è¡£æ¢å¾—å•†å±±é…’ï¼Œç¬‘æŠŠç¦»éªšç‹¬è‡ªå€¾ã€‚",
        "å½“è½©å¯¹å°Šé…’ï¼Œå››é¢èŠ™è“‰å¼€ã€‚",
        "æ€€å®¶å¯’é£Ÿå¤œï¼Œä¸­é…’è½èŠ±å¤©ã€‚",
        "é“å‚æ¦†èšä»ä¼¼é’±ï¼Œæ‘˜æ¥æ²½é…’å›è‚¯å¦ã€‚",
        "æ¼«æƒ¹ç‚‰çƒŸåŒè¢–ç´«ï¼Œç©ºå°†é…’æ™•ä¸€è¡«é’ã€‚",
        "æµ…æŠŠæ¶“æ¶“é…’ï¼Œæ·±å‡­é€æ­¤ç”Ÿã€‚",
        "é™©éŸµè¯—æˆï¼Œæ‰¶å¤´é…’é†’ï¼Œåˆ«æ˜¯é—²æ»‹å‘³ã€‚",
        "åŠå›ç»ˆæ—¥é…©é…Šé†‰ï¼Œé…’ä¸åˆ°åˆ˜ä¼¶åŸä¸ŠåœŸã€‚",
        "çé‡ä¸»äººå¿ƒï¼Œé…’æ·±æƒ…äº¦æ·±ã€‚",
        "ä¹Ÿç¬‘äººå²‘å¯‚ã€‚",
        "å–œå¾—æ•…äººåŒå¾…è¯ï¼Œæ‹Ÿæ²½æ˜¥é…’é†‰äº¬åã€‚",
        "æ„Ÿä¹‹æ¬²å¹æ¯ï¼Œå¯¹é…’è¿˜è‡ªå€¾ã€‚",
        "é…’æœªå¼€æ¨½å¥æœªè£ï¼Œå¯»æ˜¥é—®è…Šåˆ°è“¬è±ã€‚",
        "æŠ¥ç­”æ˜¥å…‰çŸ¥æœ‰å¤„ï¼Œåº”é¡»ç¾é…’é€ç”Ÿæ¶¯ã€‚",
        "æ–°å¯’ä¸­é…’æ•²çª—é›¨ï¼Œæ®‹é¦™ç»†è¢…ç§‹æƒ…ç»ªã€‚",
        "ä½•å½“è½½é…’æ¥ï¼Œå…±é†‰é‡é˜³èŠ‚ã€‚",
        "æ— è®¡å¥ˆæƒ…ä½•ï¼Œä¸”é†‰é‡‘æ¯é…’ã€‚",
        "æ˜¥é…’é¦™ç†Ÿé²ˆé±¼ç¾ï¼Œè°åŒé†‰ï¼Ÿç¼†å´æ‰èˆŸç¯·åº•ç¡ã€‚",
        "æ¬¢è¨€å¾—æ‰€æ†©ï¼Œç¾é…’èŠå…±æŒ¥ã€‚",
        "ä¸ºæˆ‘å¼•æ¯æ·»é…’é¥®ï¼Œä¸å›æŠŠç®¸å‡»ç›˜æ­Œã€‚",
        "ä¸»äººæœ‰é…’æ¬¢ä»Šå¤•ï¼Œè¯·å¥é¸£ç´å¹¿é™µå®¢ã€‚"
    ];

    const randomIndex = Math.floor(Math.random() * poemSentences.length);
    const randomSentence = poemSentences[randomIndex];

    document.getElementById('poem_sentence').innerText = randomSentence;
</script>

<script>
    // è¿œç¨‹ JSON API åœ°å€
    let jsonUrl = "https://www.eallion.com/api/v1/accounts/111136231674527355/statuses?limit=10&exclude_replies=true&exclude_reblogs=true";

    // ç›¸å¯¹æ—¶é—´æ’ä»¶ 2.5.2 https://tokinx.github.io/lately/
    (() => {
        window.Lately = new function () {
            this.lang = {
                second: " ç§’",
                minute: " åˆ†é’Ÿ",
                hour: " å°æ—¶",
                day: " å¤©",
                month: " ä¸ªæœˆ",
                year: " å¹´",
                ago: "å‰",
                error: "NaN"
            };
            const format = (date) => {
                date = new Date(_val(date));
                const floor = (num, _lang) => Math.floor(num) + _lang,
                    obj = new function () {
                        this.second = (Date.now() - date.getTime()) / 1000;
                        this.minute = this.second / 60;
                        this.hour = this.minute / 60;
                        this.day = this.hour / 24;
                        this.month = this.day / 30;
                        this.year = this.month / 12
                    },
                    key = Object.keys(obj).reverse().find(_ => obj[_] >= 1);
                return (key ? floor(obj[key], this.lang[key]) : this.lang.error) + this.lang.ago;
            },
                _val = (date) => {
                    date = new Date(date && (typeof date === 'number' ? date : date.replace(/-/g, '/').replace('T', ' ')));
                    return isNaN(date.getTime()) ? false : date.getTime();
                };
            return {
                init: ({ target = "time", lang } = {}) => {
                    if (lang) this.lang = lang;
                    for (let el of document.querySelectorAll(target)) {
                        const date = _val(el.dateTime) || _val(el.title) || _val(el.innerHTML) || 0;
                        if (!date) return;
                        el.title = new Date(date).toLocaleString();
                        el.innerHTML = format(date);
                    }
                },
                format
            }
        }
    })();

    // è®¾ç½®å®½åº¦
    // const heatmapElement = document.querySelector(".tailwindcss-heatmap");
    // const secondNavElement = mainMenuElement.querySelectorAll("nav")[1]; // è·å–ç¬¬äºŒä¸ªnavå…ƒç´ 
    // const heatmapWidth = secondNavElement.offsetWidth;
    // const heatmapWidth = heatmapElement.offsetWidth;
    // const tickerElement = document.querySelector(".tailwind-ticker");
    // tickerElement.style.maxWidth = `${heatmapWidth}px`;

    // å¤„ç† Json æ•°æ®
    if (document.querySelector('#ticker')) {
        fetch(jsonUrl)
            .then(res => res.json())
            .then(res => {
                var result = '';
                var data = res;
                for (var i = 0; i < data.length; i++) {
                    var tickerTime = new Date(data[i].created_at).toLocaleString();
                    var tickerContent = extractTextFromHtml(data[i].content)
                    var tickerUrl = data[i].url;
                    const replacements = {
                        '\\s*:star_empty:\\s*': 'ğŸŒ‘',
                        '\\s*:star_half:\\s*': 'ğŸŒ—',
                        '\\s*:star_solid:\\s*': 'ğŸŒ•'
                    };
                    tickerContent = replaceMultiple(tickerContent, replacements);
                    result += `<li class="ticker-item"><span class="datetime">${tickerTime}</span>ï¼š<a href="${tickerUrl}" target="_blank">${tickerContent}</a></li>`;
                }
                var tickerDom = document.querySelector('#ticker');
                var tickerBefore = `<div class="ticker-wrap"><ul class="ticker-list">`;
                var tickerAfter = `</ul></div>`;
                resultAll = tickerBefore + result + tickerAfter;
                tickerDom.innerHTML = resultAll;

                // ç›¸å¯¹æ—¶é—´æ’ä»¶
                window.Lately && Lately.init({
                    target: '.datetime'
                });
            });

        // æ»šåŠ¨æ•ˆæœ
        setInterval(function () {
            var tickerWrap = document.querySelector(".ticker-list");
            var tickerItem = tickerWrap.querySelectorAll(".ticker-item");
            for (var i = 0; i < tickerItem.length; i++) {
                setTimeout(function () {
                    tickerWrap.appendChild(tickerItem[0]);
                }, 1500);
            }
        }, 1500);
    }

    // æ›¿æ¢å­—ç¬¦ä¸²
    function replaceMultiple(str, replacements) {
        let result = str;
        for (const pattern in replacements) {
            const regex = new RegExp(pattern, 'g');
            result = result.replace(regex, replacements[pattern]);
        }
        return result;
    }

    // æå– HTML ä»£ç ä¸­çš„çº¯æ–‡æœ¬å†…å®¹
    function extractTextFromHtml(html) {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        return doc.body.textContent || '';
    }
</script>

<script>
    window.addEventListener('scroll', function (e) {
        var scroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
        var background_blur = document.getElementById('background-blur');
        background_blur.style.opacity = (scroll / 300)
    });

</script>
{{ end }}
