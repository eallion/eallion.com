<div class="comment-on flex flex-col md:flex-row items-start md:items-center mt-8 text-base capitalize print:hidden">
    <div id="load-giscus" class="inline-flex items-center relative">
        <span class="cursor-pointer">Click to load</span>
        <span class="ml-2 mr-1 cursor-pointer"><span class="relative block icon"><svg viewBox="0 0 210 180" xmlns="http://www.w3.org/2000/svg"><path d="m110.743 169.825 89.951-104.944a7.5 7.5 0 0 0 .226-9.486l-35-45A7.5 7.5 0 0 0 160 7.5H50a7.5 7.5 0 0 0-5.92 2.895l-35 45a7.5 7.5 0 0 0 .226 9.486l89.951 104.944a7.6 7.6 0 0 0 1.958 1.65 7.5 7.5 0 0 0 4.364 1.003 7.5 7.5 0 0 0 5.164-2.653Z" stroke="#000" stroke-width="15" stroke-linejoin="round"/><path d="M80 15H50L15 60h50z" fill="#BDDDF4"/><path d="m195 60-35-45h-30l15 45z" fill="#5DADEC"/><path d="M145 60h50l-90 105z" fill="#4289C1"/><path d="M65 60H15l90 105zm15-45L65 60h80l-15-45z" fill="#8CCAF7"/><path d="M105 165 65 60h80z" fill="#5DADEC"/></svg></span></span>
        <span class='mr-2 opacity-75 hover:opacity-100 cursor-pointer duration-300 ease-in-out'>Giscus</span>
    </div>
    <div id="load-giscus-desc" class="block md:inline-block mr-2 text-sm md:text-base lowercase md:capitalize">or</div>
    <div id="link-to-mastodon" class="flex items-center relative">
        <span class="cursor-pointer">discuss on </span>
        <span class="ml-2 cursor-pointer"><span class="relative block icon"><svg viewBox="0 0 75 79" xmlns="http://www.w3.org/2000/svg"><path d="M73.84 17.49C72.696 9.002 65.3 2.312 56.53 1.016 55.05.797 49.444 0 36.458 0h-.097c-12.99 0-15.776.797-17.256 1.016-8.525 1.26-16.311 7.271-18.2 15.86-.909 4.23-1.006 8.919-.837 13.22.24 6.17.288 12.327.848 18.47a87 87 0 0 0 2.022 12.115c1.795 7.361 9.064 13.487 16.185 15.986a43.4 43.4 0 0 0 23.68 1.25 35 35 0 0 0 2.562-.701c1.91-.607 4.147-1.285 5.792-2.477a.19.19 0 0 0 .076-.144v-5.953a.175.175 0 0 0-.216-.17 65.6 65.6 0 0 1-15.367 1.796c-8.906 0-11.301-4.226-11.987-5.985a18.6 18.6 0 0 1-1.042-4.718.17.17 0 0 1 .136-.178.2.2 0 0 1 .08.002 64.4 64.4 0 0 0 15.115 1.795c1.225 0 2.446 0 3.67-.032 5.121-.144 10.52-.406 15.558-1.39.125-.025.251-.047.359-.079 7.947-1.526 15.51-6.316 16.279-18.445.029-.477.1-5.002.1-5.497.004-1.684.543-11.946-.079-18.251" fill="url(#a)"/><path d="M61.248 27.026v21.088h-8.356V27.648c0-4.31-1.796-6.507-5.448-6.507-4.015 0-6.026 2.6-6.026 7.735v11.202H33.11V28.875c0-5.134-2.014-7.734-6.03-7.734-3.63 0-5.444 2.198-5.444 6.507v20.466h-8.353V27.026q0-6.462 3.3-10.269c2.27-2.531 5.247-3.831 8.942-3.831 4.278 0 7.51 1.644 9.665 4.93l2.079 3.49 2.083-3.49c2.154-3.286 5.386-4.93 9.657-4.93 3.691 0 6.668 1.3 8.945 3.831q3.297 3.802 3.293 10.27" fill="#fff"/><defs><linearGradient id="a" x1="37.069" y1="0" x2="37.069" y2="79" gradientUnits="userSpaceOnUse"><stop stop-color="#6364FF"/><stop offset="1" stop-color="#563ACC"/></linearGradient></defs></svg></span></span>
        <span class='ml-1 opacity-75 hover:opacity-100 cursor-pointer duration-300 ease-in-out'>
            <a href="/s/{{ .Params.slug | default .File.TranslationBaseName }}" target="_blank" rel="noopener">Mastodon</a>
        </span>
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path fill="currentColor" d="M18 5v2h5.563L11.28 19.281l1.438 1.438L25 8.437V14h2V5zM5 9v18h18V14l-2 2v9H7V11h9l2-2z"/></svg></span>
    </div>
</div>
<div id="comments" class=""></div>
<script>
    function loadGiscus() {
        return new Promise((resolve) => {
            const script = document.createElement('script');
            script.src = 'https://giscus.app/client.js';
            script.setAttribute('data-repo', 'eallion/eallion.com');
            script.setAttribute('data-repo-id', 'MDEwOlJlcG9zaXRvcnkyNjI2Njk1MDg=');
            script.setAttribute('data-category', 'Giscus');
            script.setAttribute('data-category-id', 'DIC_kwDOD6gExM4CS9eF');
            script.setAttribute('data-mapping', 'pathname');
            script.setAttribute('data-strict', '1');
            script.setAttribute('data-reactions-enabled', '1');
            script.setAttribute('data-emit-metadata', '0');
            script.setAttribute('data-input-position', 'bottom');
            script.setAttribute('data-lang', 'zh-CN');
            script.setAttribute('data-loading', 'lazy');
            script.setAttribute('crossorigin', 'anonymous');
            script.async = true;

            const htmlElement = document.documentElement;
            if (htmlElement.classList.contains('dark')) {
                script.setAttribute('data-theme', 'dark_dimmed');
            } else {
                script.setAttribute('data-theme', 'light');
            }

            script.addEventListener('load', () => {
                resolve();
            });

            document.getElementById('comments').appendChild(script);
        });
    }

    document.getElementById('load-giscus').addEventListener('click', async () => {
        await loadGiscus();
        document.getElementById('load-giscus').classList.add('!hidden');
        document.getElementById('load-giscus-desc').classList.add('!hidden');
        document.getElementById('link-to-mastodon').classList.add('mb-8');
    });
</script>
