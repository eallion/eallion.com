<!DOCTYPE html>
<html lang="{{ $.Site.Language }}">

<head>
    <title>{{ if .IsHome }}{{ $.Site.Title }}{{ with $.Site.Params.Subtitle }} â€” {{ . }}{{ end }}{{ else }}{{ .Title }} - {{ $.Site.Title }}{{ with $.Site.Params.Subtitle }} â€” {{ . }}{{ end }}{{ end }}</title>
    {{ partial "head.html" . }}
</head>

<body class="{{ if ne $.Site.Params.defaultTheme "light" -}} dark-theme {{- end -}}">
    <div class="container">
        <header id="header">
            <span class="header__inner">
                <a href="{{ if $.Site.Params.Logo.LogoHomeLink }}{{ $.Site.Params.Logo.LogoHomeLink }}{{ else }}{{ $.Site.BaseURL }}{{ end }}" class="logo">
                    {{ if $.Site.Params.Logo.path }}
                    <img src="{{ $.Site.Params.Logo.path }}" alt="{{ $.Site.Params.Logo.alt }}" />
                    {{ else }}
                    <span class="logo__text">{{ $.Site.Title }}</span>
                    <span class="logo__text logo__texts">:~$</span>
                    <span class="logo__cursor"></span>
                    {{ end }}
                </a>
                <span class="header__right">
                    {{ if len $.Site.Menus }}
                    <nav class="menu hidden">
                        <ul class="menu__inner menu__inner--desktop">
                            {{ if or $.Site.Params.showMenuItems (eq $.Site.Params.showMenuItems 0) }}
                            {{ range first $.Site.Params.showMenuItems $.Site.Menus.main }}
                            {{ if not .HasChildren }}
                            <li><a href="{{ .URL }}">{{ .Name }}</a></li>
                            {{ end }}
                            {{ end }}
                            {{ if gt (len $.Site.Menus.main) $.Site.Params.showMenuItems }}
                            <li>
                                <ul class="menu__sub-inner">
                                    <li class="menu__sub-inner-more-trigger">
                                        {{ $.Site.Params.MenuMore | default "Show more" }}
                                        <span class="menu__sub-inner-more-trigger-icon">{{ partial "greater-icon.html" . }}</span>
                                    </li>
                                    <li>
                                        <ul class="menu__sub-inner-more hidden">
                                            {{ range last (sub (len $.Site.Menus.main) $.Site.Params.showMenuItems) $.Site.Menus.main }}
                                            {{ if not .HasChildren }}
                                            <li><a href="{{ .URL }}">{{ .Name }}</a></li>
                                            {{ end }}
                                            {{ end }}
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            {{ end }}
                            {{ else }}
                            {{ range $.Site.Menus.main }}
                            {{ if not .HasChildren }}
                            <li><a href="{{ .URL }}">{{ .Name }}</a></li>
                            {{ end }}
                            {{ end }}
                            {{ end }}
                            <li>
                                <a href="/talks/" aria-label="Search" class="search-trigger"><span class="iconify-inline" data-icon="ant-design:search-outlined"></span></a>
                            </li>
                        </ul>
                        <ul class="menu__inner menu__inner--mobile">
                            <li><span class="search-scroll"><a href="/talks/" aria-label="Search" class="search-trigger"><span class="iconify-inline" data-icon="ant-design:search-outlined"></span> æœç´¢</a></span></li>
                            {{ range $.Site.Menus.main }}
                            {{ if not .HasChildren }}
                            <li><a href="{{ .URL }}">{{ .Name }}</a></li>
                            {{ end }}
                            {{ end }}
                        </ul>
                    </nav>
                    <span class="menu-trigger hidden">
                        <span class="iconify-inline" data-icon="ant-design:menu-outlined"></span>
                    </span>
                    {{ end }}
                    <span class="theme-toggle">
                        <span class="iconify-inline" data-icon="fluent:dark-theme-20-regular"></span>
                    </span>
                </span>
            </span>
        </header>
        <div class="index-talk">
            <span class="iconify-inline" data-icon="mdi:comment-quote-outline"></span>
            <ul class="talk-list">
                <li class="item"><span class="index-talks"><a href="https://gushi.ci/" target="_blank" rel="noopener noreferrer">å¤è¯—è¯</a>ï¼š</span><span id="gushici" class="poem_sentence">æ­£åœ¨åŠ è½½å¤è¯—è¯......</span><span id="poem_info" class="poem_info"></span></li>
            </ul>
            <button>Ã—</button>
        </div>
        <div class="content">
            <div class="post talk-title">
                <h2 class="post-title">{{ .Title }}</h2>
                <div class="post-content">
                    <blockquote class="hidden">æˆ‘æŒ‰æˆ‘çš„å…´è¶£å†™ï¼Œä½ ç”¨ä½ çš„æ™ºå•†è¯»ã€‚æˆ‘æ²¡æœ‰å…´è¶£è¯¯å¯¼è°ï¼Œå˜€å’•é¡µé¢è°¢ç»äº’åŠ¨ã€‚</blockquote>
                    <blockquote class="hidden">ç‹¬ç«‹åŸŸåï¼š<a href="https://e5n.co/" target="_blank" rel="noopener noreferrer">https://e5n.co</a></blockquote>
                    <p class="count">å…±å˜€å’•äº† <span class="count-data">0</span>æ¡ï¼š</p>
                    <section class="timeline">
                        <ul>
                            <div class="list"></div>
                        </ul>
                    </section>
                    <div class="load">
                        <button class="load-btn button-load">åŠ è½½æ›´å¤š</button>
                    </div>
                </div>
            </div>
        </div>
        {{ $scratch := newScratch }}
        {{ range (where .Site.Pages "Kind" "page" ) }}
        {{ $scratch.Add "total" .WordCount }}
        {{ end }}
        {{$totalWord := $scratch.Get "total" }}
        {{ $wowWord := div $totalWord 10000}}
        {{ $wowBook := "è¿˜åœ¨åŠªåŠ›æ›´æ–°ä¸­...åŠ æ²¹ï¼åŠ æ²¹å•¦ï¼"}}
        {{ if ge $wowWord 40 }}{{$wowBook = "å†™å®Œä¸€æœ¬æˆ‘å›½è‘—åçš„å››å¤§åè‘—äº†ï¼"}}
        {{ else if ge $wowWord 35 }}{{$wowBook = "å†™å®Œä¸€æœ¬ ä¸œé‡åœ­å¾ çš„ã€Šç™½å¤œè¡Œã€‹äº†ï¼"}}
        {{ else if ge $wowWord 34 }}{{$wowBook = "å†™å®Œä¸€æœ¬ é›¨æœ çš„ã€Šå·´é»åœ£æ¯é™¢ã€‹äº†ï¼"}}
        {{ else if ge $wowWord 32 }}{{$wowBook = "å†™å®Œä¸€æœ¬ è‰¾ç±³è‰Â·å‹ƒæœ—ç‰¹ çš„ã€Šå‘¼å•¸å±±åº„ã€‹äº†ï¼"}}
        {{ else if ge $wowWord 31 }}{{$wowBook = "å†™å®Œä¸€æœ¬ é˜¿æ¥ çš„ã€Šå°˜åŸƒè½å®šã€‹äº†ï¼"}}
        {{ else if ge $wowWord 30 }}{{$wowBook = "å†™å®Œä¸€æœ¬ èŒ…ç›¾ çš„ã€Šå­å¤œã€‹äº†ï¼"}}
        {{ else if ge $wowWord 28 }}{{$wowBook = "å†™å®Œä¸€æœ¬ å¼ ç‚œ çš„ã€Šå¤èˆ¹ã€‹äº†ï¼"}}
        {{ else if ge $wowWord 25 }}{{$wowBook = "å†™å®Œä¸€æœ¬ é’±é’Ÿä¹¦ çš„ã€Šå›´åŸã€‹äº†ï¼"}}
        {{ else if ge $wowWord 23 }}{{$wowBook = "å†™å®Œä¸€æœ¬ ç®€Â·å¥¥æ–¯æ±€ çš„ã€Šå‚²æ…¢ä¸åè§ã€‹äº†ï¼"}}
        {{ else if ge $wowWord 22 }}{{$wowBook = "å†™å®Œä¸€æœ¬ è«æ³Šæ¡‘ çš„ã€Šä¸€ç”Ÿã€‹äº†ï¼"}}
        {{ else if ge $wowWord 21 }}{{$wowBook = "å†™å®Œä¸€æœ¬ ä¸œé‡åœ­å¾ çš„ã€Šè§£å¿§æ‚è´§åº—ã€‹äº†ï¼"}}
        {{ else if ge $wowWord 20 }}{{$wowBook = "å†™å®Œä¸€æœ¬ å·´é‡‘ çš„ã€Šå¯’å¤œã€‹äº†ï¼"}}
        {{ else if ge $wowWord 19 }}{{$wowBook = "å†™å®Œä¸€æœ¬ äºšç±³å¥‘æ–¯ çš„ã€Šçˆ±çš„æ•™è‚²ã€‹äº†ï¼"}}
        {{ else if ge $wowWord 18 }}{{$wowBook = "å†™å®Œä¸€æœ¬ æ²ˆä»æ–‡ çš„ã€Šè¾¹åŸã€‹äº†ï¼"}}
        {{ else if ge $wowWord 17 }}{{$wowBook = "å†™å®Œä¸€æœ¬ é©¬å…‹Â·åæ¸© çš„ã€Šæ±¤å§†Â·ç´¢äºšå†é™©è®°ã€‹äº†ï¼"}}
        {{ else if ge $wowWord 16 }}{{$wowBook = "å†™å®Œä¸€æœ¬ æ›¹ç¦º çš„ã€Šæ—¥å‡ºã€‹äº†ï¼"}}
        {{ else if ge $wowWord 15 }}{{$wowBook = "å†™å®Œä¸€æœ¬ ä¼¯å†…ç‰¹ çš„ã€Šç§˜å¯†èŠ±å›­ã€‹äº†ï¼"}}
        {{ else if ge $wowWord 14 }}{{$wowBook = "å†™å®Œä¸€æœ¬ å²é“ç”Ÿ çš„ã€Šå®¿å‘½çš„å†™ä½œã€‹äº†ï¼"}}
        {{ else if ge $wowWord 13 }}{{$wowBook = "å†™å®Œä¸€æœ¬ æ›¹ç¦º çš„ã€Šé›·é›¨ã€‹äº†ï¼"}}
        {{ else if ge $wowWord 12 }}{{$wowBook = "å†™å®Œä¸€æœ¬ ä½™å çš„ã€Šæ´»ç€ã€‹äº†ï¼"}}
        {{ else if ge $wowWord 11 }}{{$wowBook = "å†™å®Œä¸€æœ¬ é²è¿… çš„ã€Šå½·å¾¨ã€‹äº†ï¼"}}
        {{ else if ge $wowWord 10 }}{{$wowBook = "å†™å®Œä¸€æœ¬ é©¬å…‹Â·åæ¸© çš„ã€Šç‹å­ä¸ä¹ä¸ã€‹äº†ï¼"}}
        {{ else if ge $wowWord 9 }}{{$wowBook = "å†™å®Œä¸€æœ¬ æ—æµ·éŸ³ çš„ã€ŠåŸå—æ—§äº‹ã€‹äº†ï¼"}}
        {{ else if ge $wowWord 7 }}{{$wowBook = "å†™å®Œä¸€æœ¬ é²è¿… çš„ã€Šå‘å–Šã€‹äº†ï¼"}}
        {{ else if ge $wowWord 5 }}{{$wowBook = "å†™å®Œä¸€æœ¬ åŸƒå…‹è‹ä½©é‡Œ çš„ã€Šå°ç‹å­ã€‹äº†ï¼"}}
        {{ end }}
        <footer class="footer">
            <div class="footer__inner">
                <!-- https://github.com/eallion/eallion.com/tree/16c9ebe6cd303d9029ced7eef7dfb780f63c4a0d -->
                {{ if $.Site.Copyright }}
                <div class="copyright copyright--user">
                    {{ $.Site.Copyright | safeHTML }}
                </div>
                {{ else }}
                <div class="footer__title">
                    <span class="footer__title-h">
                        <a href="mailto:eallions@gmail.com" target="_blank" rel="noopener noreferrer" title="Email me">
                            <span class="iconify-inline" data-icon="ant-design:mail-filled" data-width="32" data-height="32"></span>
                        </a>
                        <a href="https://github.com/eallion" target="_blank" rel="noopener noreferrer" title="GitHub">
                            <span class="iconify-inline" data-icon="ant-design:github-filled" data-width="32" data-height="32"></span>
                        </a>
                        <a href="https://twitter.com/elonmusk" target="_blank" rel="noopener noreferrer" title="Twitter">
                            <span class="iconify-inline" data-icon="entypo-social:twitter-with-circle" data-width="32" data-height="32"></span>
                        </a>
                        <a href="https://t.me/durov" target="_blank" rel="noopener noreferrer" title="Telegram">
                            <span class="iconify-inline" data-icon="fa:telegram" data-width="32" data-height="32"></span>
                        </a>
                        <a href="https://steamcommunity.com/id/eallion" target="_blank" rel="noopener noreferrer" title="steam">
                            <span class="iconify-inline" data-icon="fa-brands:steam" data-width="32" data-height="32"></span>
                        </a>
                        <a href="https://stackoverflow.com/users/11409594/eallion" target="_blank" rel="noopener noreferrer" title="StackOverflow">
                            <span class="iconify-inline" data-icon="academicons:stackoverflow-square" data-width="32" data-height="32"></span>
                        </a>
                        <a href="https://open.spotify.com/user/eallion" target="_blank" rel="noopener noreferrer" title="Spotify">
                            <span class="iconify-inline" data-icon="fa-brands:spotify" data-width="32" data-height="32"></span>
                        </a>
                    </span>
                    <hr />
                </div>
                <div class="words">
                    <span>å…± {{ len (where .Site.RegularPages "Section" "posts") }} ç¯‡æ–‡ç« </span><span>çº¦ {{ $scratch.Get "total" }} å­—</span><span>{{$wowBook | safeHTML }}</span>
                </div>
                <div class="copyright">
                    <div>
                        Copyright &copy; {{ now.Year }} <a href="https://eallion.com/copyright/" target="_self" rel="noopener noreferrer">eallion.com</a>.
                    </div>
                    <div>
                        Powered by <span class="iconify-inline" data-icon="file-icons:hugo"></span> <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo (v{{ .Site.Hugo.Version }})</a>, Theme <a href="https://github.com/panr/hugo-theme-hello-friend" target="_blank" rel="noopener noreferrer">Hello Friend</a>.
                    </div>
                    <div>
                        <span class="iconify-inline" data-icon="fa-brands:edge-legacy"></span> <a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener noreferrer">æµ™ICPå¤‡16031768å·-2</a>
                    </div>
                </div>
                {{ end }}
            </div>
        </footer>
        <div class="to-top back-to-top"><span class="iconify-inline" data-icon="ant-design:up-outlined"></span></div>
        {{ partial "footer-js.html" . }}
        <script src="//imgcache.qq.com/qcloud/tcbjs/1.10.10/tcb.js"></script>
        <script>
            var xhr = new XMLHttpRequest();
            xhr.open('get', 'https://v1.jinrishici.com/shuqing/youqing.json');
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    var data = JSON.parse(xhr.responseText);
                    var gushici = document.getElementById('gushici');
                    var poem_info = document.getElementById('poem_info');
                    gushici.innerHTML = 'ã€' + '<a href="https://www.google.com/search?q=' + data.content + '" target="_blank" rel="noopener noreferrer">' + data.content + '</a>' + 'ã€';
                    poem_info.innerHTML = 'â€” ' + '<a href="https://www.google.com/search?q=' + data.author + ' ' + data.origin + '" target="_blank" rel="noopener noreferrer">' + data.author + 'ã€Š' + data.origin + 'ã€‹' + '</a>';
                }
            };
            xhr.send();

        </script>
        <script type="text/javascript">
            $(function () {
                //ç‚¹å‡»å…³é—­å˜€å’• Widget
                $('button').click(function () {
                    $(this).parents('.index-talk').remove();
                });
            });

        </script>
        <script>
            //åˆå§‹åŒ–
            const app = tcb.init({
                env: 'eallion-8gkunp4re49bae66' //è¿™é‡Œæ˜¯ä½ çš„ç¯å¢ƒ id
            })
            app.auth({
                persistence: "none"
            }).anonymousAuthProvider().signIn().then(() => {
                //å®šä¹‰æ•°æ®å¯¹è±¡
                const db = app.database()
                //é€‰æ‹©æ•°æ®è¡¨
                const collection = db.collection('talks')
                /**
                 * å®šä¹‰åŸºæœ¬å˜é‡
                 * count | intï¼Œæ•°ç›®
                 * per | intï¼Œæ¯é¡µæ˜¾ç¤ºé¡¹ç›®æ•°
                 * page | intï¼Œç¬¬å‡ é¡µ
                 */
                var count = 0,
                    per = 10,
                    page = 1
                /**
                 * è·å–æ•°ç›®
                 */
                collection.count(function (err, res) {
                    count = res.total
                    $('.count-data').text(count)
                    getList()
                })
                /**
                 * å°è£…è·å–æ•°æ®å‡½æ•°
                 */
                function getList() {
                    if ((page - 1) * per >= count) {
                        return
                    }
                    var date
                    collection.limit(per).skip((page - 1) * per).orderBy('date', 'desc').get(function (err, res) {
                        (res.data).forEach(item => {
                            date = item.date
                            content = urlToLink(item.content)
                            $('.list').append('<li class="item"><div><p>' + content + '</p><time class="date"><small>' + `${(date.getHours() + 1) <= 12 ? 'ä¸Šåˆ' : 'ä¸‹åˆ'}` + `${(date.getHours() + 1) <= 10 ? ('0' + date.getHours()) : date.getHours()}` + ':' + `${(date.getMinutes() + 1) <= 10 ? ('0' + date.getMinutes()) :date.getMinutes()}` + ' Â· ' + date.getFullYear() + 'å¹´' + (`${(date.getMonth() + 1) < 10 ? ('0' + (date.getMonth()+1)) :date.getMonth()+1}`) + 'æœˆ' + `${(date.getDate() + 1) < 10 ? ('0' + date.getDate()) :date.getDate()}` + 'æ—¥ ' + ' Â·ã€Œ' + item.from + 'ã€</small></time></div></li>')
                        });
                        if (page * per >= count) {
                            $('.load').remove()
                            return
                        }
                        page++
                        $(".post-content a[rel!=link]:has(img)").slimbox(); //å›¾ç‰‡ç¯ç®±æ•ˆæœ
                    });
                }
                $('.button-load').click(function () {
                    getList()
                })
            }).catch(err => {
                console.log(err)
            });

            // å›¾ç‰‡å’Œé“¾æ¥
            function urlToLink(str) {
                //å»é™¤<img>æ ‡ç­¾ï¼Œç•™ src é“¾æ¥
                var re_forimg = /\<[img|IMG].*?src=[\'|\"](https\:\/\/.*?(?:[\.jpg|\.jpeg|\.png|\.gif|\.webp|\.jfif|\.bmp]))[\'|\"].*?[\/]?>/g;
                str = str.replace(re_forimg, '$1');
                //å» ![]() æ ‡ç­¾ï¼Œç•™å›¾ç‰‡é“¾æ¥
                var re_formd = /^!\[(.*)\]\((.*)\)/g;
                str = str.replace(re_formd, '$2');
                //å¤„ç†å›¾ç‰‡é“¾æ¥ï¼Œæ·»åŠ  a æ ‡ç­¾å…±æ·»åŠ ç¯ç®±æ•ˆæœ
                var re_forpic = /\bhttps?:[^:<>"]*\/([^:<>"]*)(\.(jpe?g)|(png)|(jfif)|(bmp)|(webp))/g;
                str = str.replace(re_forpic, function (imgurl) {
                    return "<a href='" + imgurl + "' rel='noopener noreferrer'><img loading='lazy' src='" + imgurl + "' ></a>";
                });
                //å¤„ç†æ™®é€šé“¾æ¥ï¼Œæ·»åŠ  a æ ‡ç­¾ä¾›è·³è½¬
                var re = /\bhttps?:\/\/(?!\S+(?:jpe?g|png|bmp|gif|webp|jfif|gif))\S+/g;
                str = str.replace(re, function (website) {
                    return "ğŸ”—<a href='" + website + "' target='_blank' rel='noopener noreferrer'>é“¾æ¥</a>";
                });
                //å¾®ä¿¡è¡¨æƒ…
                // str = qqWechatEmotionParser(str)
                return str;
            }

        </script>
        <script src="https://cdn.staticfile.org/instant.page/5.1.0/instantpage.min.js"></script>
        <script src="https://cdn.staticfile.org/pangu/4.0.7/pangu.min.js"></script>
        <script type="text/javascript">
            pangu.spacingElementByClassName('post-content');

        </script>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <script>
            // Check that service workers are registered
            if ('serviceWorker' in navigator) {
                // Use the window load event to keep the page load performant
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/service-worker.js');
                });
            }

        </script>

    </div>
</body>

</html>
