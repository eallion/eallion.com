---
title: "2024 博客变化"
subtitle: "面向死亡编程"
authors: ["eallion"]
categories: ["日志"]
tags: 
  - daily
  - 博客
slug: "2024-blog-refactor"
summary: "副标题：面向死亡编程。作者在2023年底回顾一年,围绕“如果我死了，我的博客怎么办”主题调整个人博客,包括转移域名实现自动续费,使用GitHub作为数据源,资源静态化,使用Git Submodules独立升级主题,重定向主站到www域名等,目的是在自己去世后,博客内容能最大程度保留和继续可访问。"
draft: false
comment: 
  enable: true
date: 2024-01-08T21:00:02+08:00
images: ["/assets/images/og/2024-blog-refactor.png"]
---

### 副标题：面向死亡编程

2023 年结束了！
2023 年是后疫情时代的第一个年头
2023 年是 AI 元年
2023 年是未来 10 年中最好的一年
这句话明年可以再说一次
但 2023 年，我最大的感受是像个哲学家一样
开始思考生死大限
开始思考生前身后事
因为这一年，身边的、网上的太多人离开了
——永远地离开了！
这个时候如果有人问我博客有什么变化
那都是围绕着“如果我死了，我的博客怎么办”这个问题展开的
嗯，即面向死亡编程
唔，看开点，这是一个绕不开的话题

### 变化

[Yihong](https://github.com/yihong0618/gitblog) 大佬有句名言：

> People Die, but Long Live GitHub

我同意他的全部理念，除了我觉得 GitHub 不一定 Live long
我的理由是秦朝也灭亡了、苏联也解体了、Nokia 也没落了不是吗？
但是这一点都不影响我对赛博菩萨的信任和好感

这个域名和 ID 是很个人化的东西，也没有打算作为数字遗产继承

那为了保留个人 Icon 我做了什么呢？

##### 1. 转移域名

第一件事，我就是把域名转到了 Cloudflare，并勾选了自动续费，这保证了只要 Cloudflare 不跑路，那我的域名就会一直存在下去。不花钱能选择的选项似乎不多？
这里有一个有趣的设计：如果 180 天内博客没有状态变化和操作发生，博客的 DNS 解析将自动把根域名和 www 域名的 A 记录切换到 GitHub Pages。这个判断维度是很隐私的东西，就不说了。这样做是为了避免现在用的商业服务到期了，还能让博客保持在线。做这个设计的时候，还有个有趣的事是，第一时间我居然想到的不是死亡，而是万一我去坐牢了，这个也会自动切换。

##### 2. GitHub

从几年前开始，我就把 GitHub 仓库作为唯一数据源（还是要两地三中心备份）。后来 GitHub 还推出 GitHub Actions，这样除了存储，构建和部署这些事都可以放到 GitHub 来执行了，如果 GitHub Pages 的网络没有被认证，那可以 All in GitHub 了。

##### 3. 资源静态化

在博客最近的几次更新中，去掉了博客的所有远程依赖，除了评论系统。
像「[嘀咕](https://www.eallion.com/toot/)」「[观影](https://www.eallion.com/movie/)」「[好物](https://www.eallion.com/goods/)」「[五杀](https://www.eallion.com/penta/)」「[友情链接](https://www.eallion.com/links/)」页面，虽然都依赖远程数据，但构建的时候都是静态化渲染到本地的。虽然大部分原因是为了博客性能。但就算 API 挂了，这些页面依然完好，只是内容会停留在最后构建的那一刻。
CDN 资源也去掉了。静态博客本身就支持整站 CDN 部署的，既然整站都在 CDN 上，那何需引用三方 CDN 资源呢。这还有个逻辑是，博客能打开，那同源的资源文件就能打开，但是如果博客打不开，引用的第三方资源就算能打开，那引用了有什么意义呢？但这个肯定是见仁见智的，比如有的人会因为费用原因会选择不同的 CDN 服务商。

##### 4. Theme

上次换主题是 2022 年 12 月 12 日，已经有一年多了，这次换主题做了一个明智的决定，就是以 Git Submodules 的方式引入主题：

```bash
git submodule add https://github.com/eallion/hugo-theme-doit.git themes/DoIt
```

所有的自定义优化、美化都是在自己的博客项目文件中完成的，没有任何对主题的侵入性修改，基于 Hugo 的 [构建逻辑](https://gohugo.io/templates/lookup-order/) ，Hugo 会自动按照模板优先级完成渲染，这样做的好处是博客的主题是分离的，可以独立且完整的升级主题。

##### 5. www

域名转到 Cloudflare 后，不能自定义配置 NS 服务器，必须用 Cloudflare 的 NS 服务器。因为 Cloudflare 自带 CNAME 拉平且不能关闭，这导致根域名的 CNAME 不能完美地解析到中国大陆的 CDN 上。经过一个星期的各种尝试后，最后决定把博客重定向到了 www 域，所以主站变成了 www.eallion.com ，这改变了 10 多年的博客结构，是一个大改，也是一个小改，毕竟是个人生活博客，没有对公众有影响的内容，就无所谓。目前最实惠的且支持 Anycast 的国内 CDN 好像是腾讯云的 EdgeOne，目前 www.eallion.com 就部署到了腾讯云的 EdgeOne 上了，还没死呢，死了再说。

### 其他

写之前没有列大纲，总感觉还有什么想到过的没有写，以后补充。
