---
title: "Memos ç®€ä»‹"
images: ["/assets/images/og/memos-deployment.png"]
authors: ["eallion"]
categories: ["ä»£ç "]
tags:
    - å˜€å’•
    - å“”å“”
    - Memos
    - talk
slug: "memos-deployment"
draft: false
date: 2022-11-06T16:30:22+08:00
lastmod: 2022-11-06T16:30:22+08:00
---

### Memos ç®€ä»‹ç³»åˆ—

- ã€Š[Memos ç®€ä»‹](https://eallion.com/memos-deployment/)ã€‹
- ã€Š[Memos æ‰‹åŠ¨å¯¼å…¥æ•°æ®](https://eallion.com/memos-import/)ã€‹
- ã€Š[Memos API è°ƒç”¨æ¸²æŸ“é¡µé¢](https://eallion.com/memos-api/)ã€‹
- ã€Š[Memos API å…¬å‘Šæ ·å¼æ»šåŠ¨æ•ˆæœ](https://eallion.com/memos-ticker/)ã€‹
- ã€Š[Memos API è·å–æ€»æ¡æ•°](https://eallion.com/memos-total-count/)ã€‹
- ã€Š[Memos é…ç½® Artalk è¯„è®ºç³»ç»Ÿ](https://eallion.com/artalk_for_memos/)ã€‹

### å‰è¨€

> DEMOï¼š[https://memos.eallion.com](https://memos.eallion.com/)

æˆ‘ä»æ¥è§¦ç‹¬ç«‹åšå®¢å¼€å§‹ï¼Œå°±ä¸€ç›´åœ¨åšå®¢çš„å­æ ç›®ä¸­éƒ¨ç½²äº†ä¸€ä¸ªç±»ä¼¼ [å˜€å’•](https://eallion.com/memos/) çš„å¾®åšå®¢ã€‚  
æœ€åˆçš„ä½œç”¨æ˜¯å¤‡ä»½ QQ ç©ºé—´ã€Twitter å’Œå¾®åšç­‰ã€‚  
æœ€æ—©ç”¨åˆ°çš„å¾®åšå®¢ç¨‹åºæ˜¯ PageCookeryã€‚ç”šè‡³æœ‰ç‚¹æ€€å¿µâ€¦â€¦

ç°åœ¨åœ¨ç‹¬ç«‹åšå®¢åœˆå°‘éƒ¨åšä¸»ä¸­æµè¡Œçš„è¿™ç§â€œB è¨€ B è¯­â€ï¼Œæœ€æ—©æ¥æºäºå°‘æ•°æ´¾ä¸Šçš„ä¸€ç¯‡æ–‡ç« â€”â€”[ã€Šä¿å«è¡¨è¾¾ï¼šç”¨åç«¯ BaaS å¿«é€Ÿæ­å»ºä¸“å±æ— ç‚¹èµè¯„è®ºç‰ˆå¾®åšâ€”â€”b è¨€ b è¯­ã€‹](https://sspai.com/post/60024)ï¼Œâ€œB è¨€ B è¯­â€ä¹Ÿå«â€œåºŸè¯èƒ¶å›Šâ€ã€‚

ç”±æ­¤ä¹Ÿè¡ç”Ÿå‡ºäº†ï¼š

- [LeanCloud ç‰ˆ](https://github.com/daibor/nonsense.fun)ï¼ˆåŸç‰ˆï¼‰
- [Golang ç‰ˆ](https://github.com/songquanpeng/microblog)
- [è…¾è®¯äº‘ CloudBase ç‰ˆ](https://github.com/ibearye/talk)
- [æœ¨æœ¨è€å¸ˆä¿®æ”¹ç‰ˆ](https://immmmm.com/bb-by-wechat-pro/) ã€Šã€Œå“”å“”ç‚¹å•¥ã€å¾®ä¿¡å…¬ä¼—å· 2.0ã€‹
- [BBTalk](https://github.com/BBtalkJS/BBtalk)Vercel ç‰ˆ
- æˆ‘ä¸ªäººçŸ­æš‚ä¿®æ”¹ä½¿ç”¨è¿‡çš„ [Algolia](https://github.com/eallion/eallion.com/blob/30ff6b67c3c072994f8be957c3996e546b38131c/themes/hello-friend/layouts/_default/algoliaTalk.html) ç‰ˆã€‚

ç›®å‰ä»¥ä¸Šç‰ˆæœ¬å‡å¯ä½¿ç”¨ï¼Œä¸è¿‡å¯èƒ½æœ‰äº›ç‰ˆæœ¬çš„ä½¿ç”¨æˆæœ¬æœ‰ç‚¹é«˜ã€‚

ä»Šå¤©è¦ä»‹ç»çš„æ˜¯å¦ä¸€ä¸ªèƒ½æä¾›ç±»ä¼¼åŠŸèƒ½çš„åº”ç”¨â€”â€”[Memos](https://github.com/usememos/memos)  
Memos è‡ªå·±å¯¹æ ‡çš„ç«å“æ˜¯ Flomo ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯æŠŠå®ƒç”¨æ­ªäº†ï¼Ÿ

### éƒ¨ç½² Memos

> å‰ç½®æ¡ä»¶ï¼š
>
> 1. ä¸€å° VPS æœåŠ¡å™¨æˆ–æœ¬åœ°ç”µè„‘ï¼ˆæˆ– Docker SaaS å¹³å°ï¼‰
> 2. ä¸€ç‚¹ç‚¹ WebStack æŠ€èƒ½ï¼ˆDockerã€Nginxï¼‰

å®‰è£…`docker-compose-plugin`æ’ä»¶åï¼Œ`docker compose`å‘½ä»¤å¯ä»¥å»æ‰ä¸­é—´çš„"`-`"ï¼ŒDocker Compose V1 ç‰ˆæœ¬å·²ç»ç»“æŸç”Ÿå‘½å‘¨æœŸã€‚

æš‚æ—¶ä¸å»ºè®®æŠŠ Memos éƒ¨ç½²åˆ°ç½‘ç«™äºŒçº§ç›®å½•ï¼Œå¦‚ï¼š[https://example.com/memos](https://example.com/memos)
è€Œåº”è¯¥éƒ¨ç½²åˆ°ä¸€ä¸ªäºŒçº§åŸŸåï¼Œå¦‚ï¼š[https://memos.example.com](https://memos.example.com)

1. **æ–°å»º `docker-compose.yml`**

ä¸€èˆ¬åœ¨å‡†å¤‡ç”¨äº Memos çš„åŸŸåçš„ç›®å½•ä¸‹æ–°å»º`docker-compose.yml`æ–‡ä»¶ï¼š

```bash
cd /www/wwwroot/memos.example.com
vim docker-compose.yml
```

è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š

```yml
version: "3.0"
services:
    memos:
        image: neosmemo/memos
        container_name: memos
        volumes:
            - ./memos/:/var/opt/memos
        ports:
            - 5230:5230
        restart: always
```

1. **å¯åŠ¨ Memos**

å¯åŠ¨ Memos

```bash
docker compose up -d
```

ç­‰å¾…é•œåƒæ‹‰å–å®Œæˆï¼ŒMemos å°±è¿è¡Œåœ¨æœåŠ¡å™¨çš„`5230`ç«¯å£äº†ã€‚  
æ­¤æ—¶ï¼Œæ‰“å¼€`http://127.0.0.1:5230`å°±èƒ½è®¿é—® Memos äº†ã€‚  
å¦‚æœæœ‰å…¬ç½‘ IPï¼Œé‚£å°±æ‰“å¼€`IP`+`ç«¯å£`ï¼Œå¦‚ï¼š `http://119.29.29.29:5230` ã€‚
ç”¨åŸŸååä»£ IP è§ä¸‹æ–‡ç¬¬ 4 ç‚¹ã€‚
å¸¸ç”¨çš„å‘½ä»¤æœ‰ï¼š

```bash
docker compose up -d
docker compose down
docker compose pull
docker compose up -d --force-recreate
```

1. **å‡çº§ Memos**

> å‚è€ƒï¼š[https://memos.eallion.com/m/5454](https://memos.eallion.com/m/5454)

Memos å®˜æ–¹æä¾›çš„å‡çº§å‘½ä»¤

```bash
docker-compose down && docker image rm neosmemo/memos:latest && docker-compose up -d
```

ä¼šå¯¼è‡´ Memos åœ¨å‡çº§æœŸé—´æ‰çº¿ï¼Œå› ä¸º `down` äº†ï¼Œç‰¹åˆ«æ˜¯å¢ƒå†…æœåŠ¡å™¨ç½‘é€Ÿä¸å¥½çš„æƒ…å†µä¸‹ï¼Œæ‰çº¿æ—¶é—´ä¼šéšç€ `pull` æ—¶é—´æ— é™å»¶é•¿ã€‚

æœ€æ–°ç‰ˆ Docker å‡çº§ Memos çš„å‘½ä»¤æœ‰æ”¹è¿›ç©ºé—´ï¼š

```bash
docker compose pull && docker compose up -d --force-recreate
```

ä½†æ˜¯å¦‚æœç”¨äº†é•œåƒåŠ é€ŸæœåŠ¡ï¼Œå› ä¸ºç¼“å­˜çš„åŸå› ä¹Ÿå¯èƒ½æœ‰ `pull` ä¸åˆ°æœ€æ–°é•œåƒçš„é—®é¢˜ã€‚

1. **Nginx åä»£**

å¦‚æœæ‰“ç®—å¯¹äº’è”ç½‘æä¾› Memos è®¿é—®æœåŠ¡ï¼Œå°±éœ€è¦åä»£ Memosï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨ Nginxï¼Œåä»£`5230`ç«¯å£å³å¯ã€‚

```nginx
location ^~ /
{
    proxy_pass http://127.0.0.1:5230;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header REMOTE-HOST $remote_addr;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection $connection_upgrade;
    add_header X-Cache $upstream_cache_status;
    # cache
    add_header Cache-Control no-cache;
    expires 12h;
}
```

ä¸€äº›ä¸»æœºç®¡ç†é¢æ¿æä¾›å¯è§†åŒ–åä»£è®¾ç½®ï¼Œé‚£æ›´ç®€å•ã€‚

![](/assets/images/posts/2022/11/bt_proxy.png)

1. **å¤‡ä»½æ•°æ®**

åœ¨ç¬¬ 1 æ­¥ä¸­çš„`docker-compose.yml`æ–‡ä»¶ä¸­ï¼Œ

```yml
    volumes:
      - ./memos/:/var/opt/memos
```

è¿™æ®µå°±æ˜¯æ•°æ®æŒä¹…åŒ–é…ç½®ï¼Œå¦‚æœä¸åšæ•°æ®æŒä¹…åŒ–ï¼ŒDocker å®¹å™¨é‡å¯åï¼Œæ‰€æœ‰ Memos éƒ½ä¼šæ¶ˆå¤±ã€‚
â€œ`:`â€å†’å·å‰é¢çš„å†…å®¹æ˜¯ç‰©ç†å®¿ä¸»æœºä¸Šçš„ç›®å½•ï¼Œä¾‹å­ä¸­å¯¹åº”çš„ç›®å½•ä¸ºï¼š

```bash
/www/wwwroot/memos.example.com/memos
```

éœ€è¦å¤‡ä»½çš„æ•°æ®æ˜¯æ­¤ç›®å½•ä¸‹çš„`memos_prod.db`æ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ª SQLite æ•°æ®åº“æ–‡ä»¶ï¼ŒMemos çš„æ‰€æœ‰è®¾ç½®ã€ç”¨æˆ·ä¿¡æ¯ã€é™„ä»¶å’Œ Memos éƒ½ä¿å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚  
å®˜æ–¹æä¾›çš„ç¤ºä¾‹ä¸­ï¼Œæ•°æ®å·ä¸ºå®¶ç›®å½•`/home/username`ä¸‹çš„`.memos`ç›®å½•ï¼Œæ˜¯ä¸€ä¸ªéšè—ç›®å½•ï¼Œæ³¨æ„å¯¹æ¯”ã€‚

### Memos Awesome

- [https://memos.top](https://memos.top)
- Discuss in [Telegram](https://t.me/+-_tNF1k70UU4ZTc9) ğŸ‘¾
- Docker Hubï¼š[https://hub.docker.com/r/neosmemo/memos](https://hub.docker.com/r/neosmemo/memos)
- Docker Hub Nightlyï¼š[https://hub.docker.com/r/eallion/memos](https://hub.docker.com/r/eallion/memos)
- Moe Memos å®¢æˆ·ç«¯ï¼š[https://memos.moe/](https://memos.moe/)
- Memos-bber Chrome æ‰©å±•ï¼š[https://github.com/lmm214/memos-bber](https://github.com/lmm214/memos-bber)
- Memos å¾®ä¿¡å°ç¨‹åºï¼š[https://github.com/Rabithua/memos_wmp](https://github.com/Rabithua/memos_wmp)
- Telegram Botï¼š[https://github.com/qazxcdswe123/telegramMemoBot](https://github.com/qazxcdswe123/telegramMemoBot)
- [å“”å“”å¹¿åœº](https://immmmm.com/bbs-by-memos/)ï¼š[https://immmmm.com/bbs/](https://immmmm.com/bbs/)
- [ã€Œåˆ†äº«ã€Android ä½¿ç”¨ HTTP Shortcuts å½•å…¥ç¬”è®°](https://github.com/usememos/memos/discussions/315)
- [ã€Œåˆ†äº«ã€ä½¿ç”¨ iOS å¿«æ·æŒ‡ä»¤å½•å…¥ç¬”è®°ï¼Œæ”¯æŒå¤šå›¾ä¸Šä¼ ï¼Œæ”¯æŒæ ‡ç­¾é€‰æ‹©](https://github.com/usememos/memos/discussions/52)
- [ã€Œåˆ†äº«ã€åœ¨ Fly.io å¹³å°ä¸Šæ­å»º memos å¹¶è‡ªåŠ¨å¤‡ä»½åˆ° B2/S3](https://github.com/usememos/memos/discussions/451)

### ä¸€ç‚¹ç‚¹å»ºè®®

1. å‘å›¾å°½é‡æŠŠå›¾ç‰‡ä¼ åˆ°ç¬¬ä¸‰æ–¹å›¾åºŠï¼Œï¼ˆè‡³å°‘è¿‘æœŸç‰ˆæœ¬ï¼‰åˆ«ä¸Šä¼ åˆ° Memos èµ„æºåº“ã€‚
2. é™„ä»¶ä¹Ÿä¸€æ ·åˆ«ä¼ åˆ° Memos èµ„æºåº“ï¼Œå¯ä»¥ä¼ åˆ°ç¬¬ä¸‰æ–¹ç½‘ç›˜ï¼Œè´´ä¸Šåˆ†äº«é“¾æ¥ã€‚
3. å¤‡ä»½`memos_prod.db`æ•°æ®åº“éµå¾ªä¸¤åœ°ä¸‰ä¸­å¿ƒåŸåˆ™ï¼Œå¤šå¤„å¤‡ä»½ï¼Œä¸”æ˜¯å•å‘çš„ã€‚
4. å¦‚æœä½ æ„è¯†ä¸åˆ°æ•°æ®å¯¹ä½ æœ‰å¤šçè´µæˆ–é‡è¦ï¼Œç”¨ SaaS æœåŠ¡å³å¯ï¼Œä¸ç”¨è‡ªå»ºã€‚
5. æ²¡æœ‰é‚£ä¹ˆå¤šäººæ¥çœ‹ä½ çš„ Memosï¼Œè‡ªå¨±è‡ªä¹å³å¯ã€‚
